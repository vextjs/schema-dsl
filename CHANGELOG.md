# schema-dsl æ›´æ–°æ—¥å¿—

æœ¬æ–‡æ¡£è®°å½• schema-dsl é¡¹ç›®çš„æ‰€æœ‰é‡è¦å˜æ›´ã€‚

æ ¼å¼åŸºäº [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼Œ
ç‰ˆæœ¬å·éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ã€‚

---

## ç‰ˆæœ¬æ¦‚è§ˆ

| ç‰ˆæœ¬               | æ—¥æœŸ | å˜æ›´æ‘˜è¦ | è¯¦ç»† |
|------------------|------|---------|------|
| [v1.1.3](#v113)  | 2026-01-09 | ğŸ› Bugä¿®å¤ï¼šç±»å‹é”™è¯¯æ¶ˆæ¯æ¨¡æ¿å˜é‡æœªæ›¿æ¢ | [æŸ¥çœ‹è¯¦æƒ…](#v113) |
| [v1.1.2](#v112)  | 2026-01-06 | ğŸ‰ æ–°åŠŸèƒ½ï¼šæ•°å­—æ¯”è¾ƒè¿ç®—ç¬¦ + Bugä¿®å¤ | [æŸ¥çœ‹è¯¦æƒ…](#v112) |
| [v1.1.1](#v111)  | 2026-01-06 | ğŸ‰ æ–°åŠŸèƒ½ï¼šConditionalBuilder ç‹¬ç«‹æ¶ˆæ¯æ”¯æŒ | [æŸ¥çœ‹è¯¦æƒ…](#v111) |
| [v1.1.0](#v110)  | 2026-01-05 | ğŸ‰ é‡å¤§åŠŸèƒ½ï¼šè·¨ç±»å‹è”åˆéªŒè¯ + æ’ä»¶ç³»ç»Ÿå¢å¼º | [æŸ¥çœ‹è¯¦æƒ…](#v110) |
| [v1.0.9](#v109)  | 2026-01-04 | ğŸ‰ é‡å¤§æ”¹è¿›ï¼šå¤šè¯­è¨€æ”¯æŒå®Œå–„ + TypeScript ç±»å‹å®Œæ•´ | [æŸ¥çœ‹è¯¦æƒ…](#v109) |
| [v1.0.8](#v108) | 2026-01-04 | ä¼˜åŒ–ï¼šé”™è¯¯æ¶ˆæ¯è¿‡æ»¤å¢å¼º | [æŸ¥çœ‹è¯¦æƒ…](#v108) |
| [v1.0.7](#v107)  | 2026-01-04 | ä¿®å¤ï¼šdsl.match/dsl.if åµŒå¥—æ”¯æŒ dsl() åŒ…è£¹ | [æŸ¥çœ‹è¯¦æƒ…](#v107) |
| [v1.0.6](#v106)  | 2026-01-04 | ğŸš¨ ç´§æ€¥ä¿®å¤ï¼šTypeScript ç±»å‹æ±¡æŸ“ | [æŸ¥çœ‹è¯¦æƒ…](#v106) |
| [v1.0.5](#v105)  | 2026-01-04 | æµ‹è¯•è¦†ç›–ç‡æå‡è‡³ 97% | [æŸ¥çœ‹è¯¦æƒ…](#v105) |
| [v1.0.4](#v104)  | 2025-12-31 | TypeScript å®Œæ•´æ”¯æŒã€validateAsyncã€ValidationError | [æŸ¥çœ‹è¯¦æƒ…](#v104) |
| [v1.0.3](#v103)  | 2025-12-31 | âš ï¸ ç ´åæ€§å˜æ›´ï¼šå•å€¼è¯­æ³•ä¿®å¤ | [æŸ¥çœ‹è¯¦æƒ…](#v103) |
| [v1.0.2](#v102)  | 2025-12-31 | 15ä¸ªæ–°å¢éªŒè¯å™¨ã€å®Œæ•´æ–‡æ¡£ã€75ä¸ªæµ‹è¯• | [æŸ¥çœ‹è¯¦æƒ…](#v102) |
| [v1.0.1](#v101)  | 2025-12-31 | æšä¸¾åŠŸèƒ½ã€è‡ªåŠ¨ç±»å‹è¯†åˆ«ã€ç»Ÿä¸€é”™è¯¯æ¶ˆæ¯ | [æŸ¥çœ‹è¯¦æƒ…](#v101) |
| [v1.0.0](#v100)  | 2025-12-29 | åˆå§‹å‘å¸ƒç‰ˆæœ¬ | [æŸ¥çœ‹è¯¦æƒ…](#v100) |

---

## [v1.1.3] - 2026-01-09

### ğŸ› Bug ä¿®å¤

#### ç±»å‹éªŒè¯é”™è¯¯æ¶ˆæ¯æ¨¡æ¿å˜é‡æœªæ›¿æ¢

**é—®é¢˜æè¿°**ï¼š
å½“ç±»å‹éªŒè¯å¤±è´¥æ—¶ï¼Œé”™è¯¯æ¶ˆæ¯ä¸­çš„ `{{#actual}}` æ¨¡æ¿å˜é‡æ²¡æœ‰è¢«æ›¿æ¢ï¼Œå¯¼è‡´é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºä¸å®Œæ•´ã€‚

**ä¿®å¤å‰**ï¼š
```javascript
const schema = dsl({ age: 'string!' });
const result = validate(schema, { age: 25 });
// âŒ é”™è¯¯æ¶ˆæ¯: "age should be string, got {{#actual}}"
```

**ä¿®å¤å**ï¼š
```javascript
const schema = dsl({ age: 'string!' });
const result = validate(schema, { age: 25 });
// âœ… é”™è¯¯æ¶ˆæ¯: "age should be string, got number"
```

**ä¿®å¤å†…å®¹**ï¼š
- âœ… åœ¨ `ErrorFormatter.formatDetailed()` ä¸­æ·»åŠ  `actual` å‚æ•°è®¡ç®—é€»è¾‘
- âœ… æ”¯æŒæ­£ç¡®æ˜¾ç¤ºå®é™…æ•°æ®ç±»å‹ï¼š`number`, `string`, `boolean`, `object`, `array`, `null`, `undefined`
- âœ… ä¿®å¤æ–‡ä»¶ï¼š`lib/core/ErrorFormatter.js` ç¬¬ 280-284 è¡Œ

**å½±å“èŒƒå›´**ï¼š
- âœ… ä»…å½±å“ç±»å‹éªŒè¯é”™è¯¯æ¶ˆæ¯çš„æ˜¾ç¤º
- âœ… ä¸å½±å“éªŒè¯é€»è¾‘æœ¬èº«
- âœ… å‘åå…¼å®¹ï¼Œæ— ç ´åæ€§å˜æ›´

**æ„Ÿè°¢**ï¼š
æ„Ÿè°¢ monSQLize é¡¹ç›®å‘ç°å¹¶æŠ¥å‘Šæ­¤é—®é¢˜ã€‚

---

## [v1.1.2] - 2026-01-06

### ğŸ‰ æ–°åŠŸèƒ½

#### æ•°å­—æ¯”è¾ƒè¿ç®—ç¬¦ - æ›´ç›´è§‚çš„æ•°å€¼éªŒè¯

**æ–°å¢ 5 ç§æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œè®©æ•°å€¼éªŒè¯æ›´è¯­ä¹‰åŒ–**

ç°åœ¨ `number` å’Œ `integer` ç±»å‹æ”¯æŒ 5 ç§æ¯”è¾ƒè¿ç®—ç¬¦ï¼š`>`, `>=`, `<`, `<=`, `=`

**åŸºç¡€ç”¨æ³•**ï¼š

```javascript
const { dsl, validate } = require('schema-dsl');

// âœ… å¤§äºï¼ˆä¸åŒ…æ‹¬è¾¹ç•Œï¼‰
const schema1 = dsl({ value: 'number:>0' });
validate(schema1, { value: 1 });   // âœ… true
validate(schema1, { value: 0 });   // âŒ false (0ä¸æ»¡è¶³>0)

// âœ… å¤§äºç­‰äº
const schema2 = dsl({ age: 'number:>=18' });
validate(schema2, { age: 18 });    // âœ… true (åŒ…æ‹¬18)
validate(schema2, { age: 17 });    // âŒ false

// âœ… å°äºï¼ˆä¸åŒ…æ‹¬è¾¹ç•Œï¼‰
const schema3 = dsl({ temp: 'number:<100' });
validate(schema3, { temp: 99.9 }); // âœ… true
validate(schema3, { temp: 100 });  // âŒ false (100ä¸æ»¡è¶³<100)

// âœ… å°äºç­‰äº
const schema4 = dsl({ score: 'number:<=100' });
validate(schema4, { score: 100 }); // âœ… true (åŒ…æ‹¬100)

// âœ… ç­‰äº
const schema5 = dsl({ level: 'number:=5' });
validate(schema5, { level: 5 });   // âœ… true
validate(schema5, { level: 4 });   // âŒ false
```

**æ”¯æŒå°æ•°å’Œè´Ÿæ•°**ï¼š

```javascript
// å°æ•°
dsl({ value: 'number:>0.5' })      // å¤§äº0.5
dsl({ price: 'number:<=99.99' })   // å°äºç­‰äº99.99

// è´Ÿæ•°
dsl({ value: 'number:>-10' })      // å¤§äº-10
dsl({ temp: 'number:<-5' })        // å°äº-5

// é…åˆå¿…å¡«æ ‡è®°
dsl({ age: 'number:>=18!' })       // å¿…å¡«ä¸”å¤§äºç­‰äº18
dsl({ price: 'number:>0!' })       // å¿…å¡«ä¸”å¤§äº0
```

**å¯¹æ¯”ï¼šæ¯”è¾ƒè¿ç®—ç¬¦ vs èŒƒå›´è¯­æ³•**ï¼š

| éœ€æ±‚ | èŒƒå›´è¯­æ³• | æ¯”è¾ƒè¿ç®—ç¬¦ | æ¨è |
|------|---------|-----------|------|
| x â‰¥ 18 | `number:18-` | `number:>=18` | **æ¯”è¾ƒè¿ç®—ç¬¦**ï¼ˆæ›´æ¸…æ™°ï¼‰ |
| x > 0ï¼ˆä¸åŒ…æ‹¬0ï¼‰ | âŒ æ— æ³•è¡¨è¾¾ | `number:>0` | **æ¯”è¾ƒè¿ç®—ç¬¦**ï¼ˆå”¯ä¸€æ–¹æ³•ï¼‰ |
| x < 100ï¼ˆä¸åŒ…æ‹¬100ï¼‰ | âŒ æ— æ³•è¡¨è¾¾ | `number:<100` | **æ¯”è¾ƒè¿ç®—ç¬¦**ï¼ˆå”¯ä¸€æ–¹æ³•ï¼‰ |
| x = 100 | `number:100`ï¼ˆå®é™…â‰¤100ï¼‰ | `number:=100` | **æ¯”è¾ƒè¿ç®—ç¬¦**ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰ |

**å®é™…åº”ç”¨åœºæ™¯**ï¼š

```javascript
// åœºæ™¯1ï¼šç”¨æˆ·æ³¨å†Œ - å¹´é¾„é™åˆ¶
const schema = dsl({
  username: 'string:3-32!',
  email: 'email!',
  age: 'number:>=18!',  // å¿…é¡»å¹´æ»¡18å²
  password: 'string:8-!'
});

// åœºæ™¯2ï¼šç”µå•†ç³»ç»Ÿ - ä»·æ ¼éªŒè¯
const schema = dsl({
  productName: 'string:1-100!',
  price: 'number:>0!',      // ä»·æ ¼å¿…é¡»å¤§äº0
  discount: 'number:0-100'  // æŠ˜æ‰£ 0-100
});

// åœºæ™¯3ï¼šæ¸©åº¦ç›‘æ§
const schema = dsl({
  deviceId: 'string!',
  temperature: 'number:>0',   // æ¸©åº¦ > 0
  humidity: 'number:<=100'    // æ¹¿åº¦ â‰¤ 100
});
```

**JSON Schema æ˜ å°„**ï¼š

```javascript
'number:>0'    â†’ { exclusiveMinimum: 0 }
'number:>=18'  â†’ { minimum: 18 }
'number:<100'  â†’ { exclusiveMaximum: 100 }
'number:<=100' â†’ { maximum: 100 }
'number:=100'  â†’ { enum: [100] }
```

**ç‰¹æ€§**ï¼š
- âœ… æ”¯æŒ 5 ç§æ¯”è¾ƒè¿ç®—ç¬¦
- âœ… æ”¯æŒå°æ•°ï¼ˆå¦‚ `number:>0.5`ï¼‰
- âœ… æ”¯æŒè´Ÿæ•°ï¼ˆå¦‚ `number:>-10`ï¼‰
- âœ… æ”¯æŒå¿…å¡«æ ‡è®°ï¼ˆå¦‚ `number:>=18!`ï¼‰
- âœ… é€‚ç”¨äº `number` å’Œ `integer` ç±»å‹
- âœ… å®Œå…¨å‘åå…¼å®¹åŸæœ‰èŒƒå›´è¯­æ³•
- âœ… å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ

**æ–‡æ¡£é“¾æ¥**ï¼š
- [æ•°å­—æ¯”è¾ƒè¿ç®—ç¬¦å®Œæ•´æ–‡æ¡£](./docs/number-operators.md)
- [README è¯­æ³•é€ŸæŸ¥](./README.md#-dsl-è¯­æ³•é€ŸæŸ¥)

---

### ğŸ› Bug ä¿®å¤

#### ä¿®å¤æ¯”è¾ƒè¿ç®—ç¬¦è¢«è¯¯è§£æä¸ºæšä¸¾çš„é—®é¢˜

**é—®é¢˜æè¿°**ï¼š
åœ¨ v1.1.1 åŠä¹‹å‰ç‰ˆæœ¬ï¼Œä½¿ç”¨ `number:>0` ç­‰è¯­æ³•æ—¶ä¼šè¢«é”™è¯¯è§£æä¸ºå­—ç¬¦ä¸²æšä¸¾ `enum: ['>0']`ï¼Œå¯¼è‡´éªŒè¯ç»“æœå®Œå…¨ç›¸åã€‚

**ä¿®å¤å‰**ï¼š
```javascript
const schema = dsl({ value: 'number:>0' });
validate(schema, { value: -5 }); // âŒ é”™è¯¯ï¼šè¿”å› trueï¼ˆåº”è¯¥falseï¼‰
validate(schema, { value: 5 });  // âŒ é”™è¯¯ï¼šè¿”å› falseï¼ˆåº”è¯¥trueï¼‰
```

**ä¿®å¤å**ï¼š
```javascript
const schema = dsl({ value: 'number:>0' });
validate(schema, { value: -5 }); // âœ… æ­£ç¡®ï¼šè¿”å› false
validate(schema, { value: 5 });  // âœ… æ­£ç¡®ï¼šè¿”å› true
```

**å½±å“èŒƒå›´**ï¼š
- ä»…å½±å“ä½¿ç”¨ `>`, `<`, `>=`, `<=`, `=` ç¬¦å·çš„ number çº¦æŸ
- åŸæœ‰èŒƒå›´è¯­æ³•ï¼ˆå¦‚ `number:0-100`ï¼‰ä¸å—å½±å“
- å®Œå…¨å‘åå…¼å®¹

---

### ğŸ“š æ–‡æ¡£æ›´æ–°

- æ–°å¢ [æ•°å­—æ¯”è¾ƒè¿ç®—ç¬¦æ–‡æ¡£](./docs/number-operators.md)
- æ›´æ–° README.md æ·»åŠ æ¯”è¾ƒè¿ç®—ç¬¦ç¤ºä¾‹
- æ›´æ–° index.d.ts æ·»åŠ æ¯”è¾ƒè¿ç®—ç¬¦ç±»å‹æ³¨é‡Š
- æ–°å¢ 28 ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦å•å…ƒæµ‹è¯•

---

### ğŸ§ª æµ‹è¯•

- **æ–°å¢æµ‹è¯•**ï¼š28 ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦æµ‹è¯•ç”¨ä¾‹
- **æµ‹è¯•æ€»æ•°**ï¼š949 ä¸ªï¼ˆ921 + 28ï¼‰
- **æµ‹è¯•è¦†ç›–**ï¼š100% é€šè¿‡
- **æµ‹è¯•æ–‡ä»¶**ï¼š`test/unit/number-operators.test.js`

---

### ğŸ“Š å˜æ›´ç»Ÿè®¡

- **æ–°å¢åŠŸèƒ½**ï¼š1 ä¸ªï¼ˆæ•°å­—æ¯”è¾ƒè¿ç®—ç¬¦ï¼‰
- **Bug ä¿®å¤**ï¼š1 ä¸ªï¼ˆæ¯”è¾ƒè¿ç®—ç¬¦è¯¯è§£æï¼‰
- **æ–‡æ¡£æ›´æ–°**ï¼š3 ä¸ªï¼ˆREADME, docs/number-operators.md, index.d.tsï¼‰
- **æµ‹è¯•æ–°å¢**ï¼š28 ä¸ª
- **ä»£ç å˜æ›´**ï¼š2 ä¸ªæ–‡ä»¶ï¼ˆlib/core/DslBuilder.js, lib/adapters/DslAdapter.jsï¼‰

---

## [v1.1.1] - 2026-01-06

### ğŸ‰ æ–°åŠŸèƒ½

#### ConditionalBuilder ç‹¬ç«‹æ¶ˆæ¯æ”¯æŒ - `.and()/.or()` åå¯è°ƒç”¨ `.message()`

**æ¯ä¸ªæ¡ä»¶éƒ½å¯ä»¥æœ‰è‡ªå·±çš„é”™è¯¯æ¶ˆæ¯**

ç°åœ¨æ”¯æŒåœ¨ `.and()` å’Œ `.or()` åè°ƒç”¨ `.message()` è®¾ç½®ç‹¬ç«‹çš„é”™è¯¯æ¶ˆæ¯ï¼Œè®©é”™è¯¯æç¤ºæ›´ç²¾ç¡®ã€‚

**åŸºç¡€ç”¨æ³•**ï¼š

```javascript
const { dsl } = require('schema-dsl');

// âœ… v1.1.1 æ–°åŠŸèƒ½ï¼šæ¯ä¸ªæ¡ä»¶ç‹¬ç«‹æ¶ˆæ¯
dsl.if(d => !d)
  .message('ACCOUNT_NOT_FOUND')
  .and(d => d.tradable_credits < amount)
  .message('INSUFFICIENT_TRADABLE_CREDITS')
  .assert(account);

// å·¥ä½œåŸç†ï¼š
// - ç¬¬ä¸€ä¸ªæ¡ä»¶å¤±è´¥ â†’ è¿”å› 'ACCOUNT_NOT_FOUND'
// - ç¬¬äºŒä¸ªæ¡ä»¶å¤±è´¥ â†’ è¿”å› 'INSUFFICIENT_TRADABLE_CREDITS'
// - æ‰€æœ‰æ¡ä»¶é€šè¿‡ â†’ éªŒè¯æˆåŠŸ
```

**ç‰¹æ€§**ï¼š
- âœ… æ”¯æŒå¤šä¸ª `.and()` æ¡ä»¶å„æœ‰ç‹¬ç«‹æ¶ˆæ¯
- âœ… æ”¯æŒ `.or()` æ¡ä»¶ç‹¬ç«‹æ¶ˆæ¯
- âœ… è‡ªåŠ¨æ£€æµ‹å¯ç”¨é“¾å¼æ£€æŸ¥æ¨¡å¼
- âœ… 100% å‘åå…¼å®¹ï¼Œä¸å½±å“ç°æœ‰ä»£ç 
- âœ… å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ

**å®é™…åº”ç”¨ç¤ºä¾‹**ï¼š

```javascript
// å¤šå±‚éªŒè¯ï¼Œæ¯å±‚éƒ½æœ‰æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯
dsl.if(d => !d)
  .message('ACCOUNT_NOT_FOUND')
  .and(d => d.status !== 'active')
  .message('ACCOUNT_INACTIVE')
  .and(d => d.tradable_credits < amount)
  .message('INSUFFICIENT_TRADABLE_CREDITS')
  .assert(account);
```

**æ–‡æ¡£é“¾æ¥**ï¼š
- [æ¡ä»¶ API æ–‡æ¡£](./docs/conditional-api.md)
- [README FAQ Q7](./README.md#q7-å¦‚ä½•åˆå¹¶å¤šä¸ª-dslif-éªŒè¯)

---

#### I18nError å¤šè¯­è¨€é”™è¯¯æŠ›å‡ºæœºåˆ¶

**ç»Ÿä¸€çš„å¤šè¯­è¨€é”™è¯¯æŠ›å‡º**

æ–°å¢ `I18nError` ç±»å’Œ `dsl.error` å¿«æ·æ–¹æ³•ï¼Œæä¾›ç»Ÿä¸€çš„å¤šè¯­è¨€é”™è¯¯æŠ›å‡ºæœºåˆ¶ã€‚

**åŸºç¡€ç”¨æ³•**ï¼š

```javascript
const { I18nError, dsl } = require('schema-dsl');

// æ–¹å¼1ï¼šç›´æ¥æŠ›å‡º
I18nError.throw('account.notFound');
// ä¸­æ–‡: "è´¦æˆ·ä¸å­˜åœ¨"
// è‹±æ–‡: "Account not found"

// æ–¹å¼2ï¼šå¸¦å‚æ•°æ’å€¼
I18nError.throw('account.insufficientBalance', {
  balance: 50,
  required: 100
});
// è¾“å‡º: "ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢50ï¼Œéœ€è¦100"

// æ–¹å¼3ï¼šæ–­è¨€é£æ ¼ï¼ˆæ¨èï¼‰
I18nError.assert(account, 'account.notFound');
I18nError.assert(
  account.balance >= 100,
  'account.insufficientBalance',
  { balance: account.balance, required: 100 }
);

// æ–¹å¼4ï¼šå¿«æ·æ–¹æ³•
dsl.error.throw('user.noPermission');
dsl.error.assert(user.role === 'admin', 'user.noPermission');
```

**ç‰¹æ€§**ï¼š
- âœ… ç»Ÿä¸€çš„é”™è¯¯ä»£ç æ ¼å¼ï¼š`{æ¨¡å—}.{é”™è¯¯ç±»å‹}`
- âœ… è‡ªåŠ¨å¤šè¯­è¨€ç¿»è¯‘ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼‰
- âœ… å‚æ•°æ’å€¼æ”¯æŒ
- âœ… Express/Koa é›†æˆï¼ˆtoJSON æ–¹æ³•ï¼‰
- âœ… ä¸ `.message()` å’Œ `.label()` ä½¿ç”¨ç›¸åŒçš„å¤šè¯­è¨€æœºåˆ¶

**å†…ç½®é”™è¯¯ä»£ç **ï¼š
- é€šç”¨: `error.notFound`, `error.forbidden`, `error.unauthorized`
- è´¦æˆ·: `account.notFound`, `account.insufficientBalance`, `account.insufficientCredits`
- ç”¨æˆ·: `user.notFound`, `user.noPermission`, `user.notVerified`
- è®¢å•: `order.notPaid`, `order.paymentMissing`, `order.addressMissing`

**Express/Koa é›†æˆ**ï¼š

```javascript
app.use((error, req, res, next) => {
  if (error instanceof I18nError) {
    return res.status(error.statusCode).json(error.toJSON());
  }
  next(error);
});
```

**æ–‡æ¡£é“¾æ¥**ï¼š
- [ä½¿ç”¨ç¤ºä¾‹](./examples/i18n-error.examples.js)
- [README FAQ Q8](./README.md#q8-å¦‚ä½•ç»Ÿä¸€æŠ›å‡ºå¤šè¯­è¨€é”™è¯¯v111)

---

### ğŸ“ æµ‹è¯•

- **æ–°å¢**: 52 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆ24ä¸ªç‹¬ç«‹æ¶ˆæ¯ + 28ä¸ª I18nErrorï¼‰
- **æ€»è®¡**: 921 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ (100%)

### ğŸ“– æ–‡æ¡£

- **æ–°å¢**: docs/conditional-api.md æ–°å¢ 600+ è¡ŒåŠŸèƒ½è¯´æ˜
- **æ–°å¢**: examples/i18n-error.examples.js I18nError ä½¿ç”¨ç¤ºä¾‹
- **æ›´æ–°**: README.md FAQ Q7/Q8 æ·»åŠ æ–°åŠŸèƒ½è¯´æ˜
- **æ›´æ–°**: index.d.ts TypeScript ç±»å‹æ³¨é‡Šå’Œç¤ºä¾‹ï¼ˆI18nError + dsl.errorï¼‰

---

## [v1.1.0] - 2026-01-05

### ğŸ‰ æ–°åŠŸèƒ½

#### 1. è·¨ç±»å‹è”åˆéªŒè¯ - `types:` è¯­æ³•

**ä¸€ä¸ªå­—æ®µæ”¯æŒå¤šç§ç±»å‹**

...existing content...

**å¸¦çº¦æŸçš„è”åˆç±»å‹**ï¼š

```javascript
const schema = dsl({
  contact: 'types:email|phone!',         // é‚®ç®±æˆ–æ‰‹æœºå·
  price: 'types:number:0-|string:1-20',  // æ•°å­—ä»·æ ¼æˆ–"é¢è®®"
  rating: 'types:integer:1-5|string:9'   // æ•´æ•°1-5æˆ–å­—ç¬¦ä¸²"excellent"
});
```

**å®é™…åº”ç”¨åœºæ™¯**ï¼š

```javascript
// ç”¨æˆ·æ³¨å†Œï¼šçµæ´»çš„è”ç³»æ–¹å¼
const registerSchema = dsl({
  username: 'string:3-20!',
  contact: 'types:email|phone!',  // æ”¯æŒé‚®ç®±æˆ–æ‰‹æœºå·æ³¨å†Œ
  age: 'types:integer:1-150|null' // å¹´é¾„å¯é€‰ï¼ˆnullè¡¨ç¤ºä¸å¡«ï¼‰
});
```

**æ”¯æŒçš„ç±»å‹**ï¼š
- âœ… æ‰€æœ‰å†…ç½®ç±»å‹ï¼š`string`, `number`, `email`, `url`, `uuid` ç­‰
- âœ… æ’ä»¶æ³¨å†Œçš„è‡ªå®šä¹‰ç±»å‹ï¼ˆè§ä¸‹æ–‡ï¼‰

---

#### 2. æ’ä»¶ç³»ç»Ÿå¢å¼º - DSLç±»å‹æ³¨å†Œ

**æ’ä»¶ç°åœ¨å¯ä»¥æ³¨å†Œè‡ªå®šä¹‰DSLç±»å‹**

æ’ä»¶ä¸å†å±€é™äºæ³¨å†Œajv format/keywordï¼Œç°åœ¨å¯ä»¥æ³¨å†Œå®Œæ•´çš„DSLç±»å‹ï¼Œè®©è‡ªå®šä¹‰ç±»å‹åœ¨DSLè¯­æ³•ä¸­ç›´æ¥å¯ç”¨ã€‚

**æ”¹é€ å‰** (v1.0.x)ï¼š
```javascript
// âŒ åªèƒ½æ³¨å†Œajv formatï¼ˆä»…éªŒè¯é˜¶æ®µç”Ÿæ•ˆï¼‰
install(schemaDsl, options) {
  const ajv = validator.getAjv();
  ajv.addFormat('phone-cn', { validate: /^1[3-9]\d{9}$/ });
  
  // âŒ æ— æ³•åœ¨DSLè¯­æ³•ä¸­ä½¿ç”¨
  // dsl({ phone: 'phone-cn!' })  // æŠ¥é”™ï¼šæœªçŸ¥ç±»å‹
}
```

**æ”¹é€ å** (v1.1.0)ï¼š
```javascript
// âœ… åŒæ—¶æ³¨å†ŒDSLç±»å‹å’Œajv format
install(schemaDsl, options) {
  const { DslBuilder } = schemaDsl;
  
  // âœ… æ³¨å†Œåˆ°DSLè§£æå™¨ï¼ˆè§£æé˜¶æ®µï¼‰
  DslBuilder.registerType('phone-cn', {
    type: 'string',
    pattern: /^1[3-9]\d{9}$/.source,
    minLength: 11,
    maxLength: 11
  });
  
  // âœ… æ³¨å†Œåˆ°ajvï¼ˆéªŒè¯é˜¶æ®µï¼‰
  const ajv = validator.getAjv();
  ajv.addFormat('phone-cn', { validate: /^1[3-9]\d{9}$/ });
  
  // âœ… ç°åœ¨å¯ä»¥åœ¨DSLä¸­ç›´æ¥ä½¿ç”¨
  // dsl({ phone: 'phone-cn!' })  // âœ… æˆåŠŸ
  // dsl({ contact: 'types:email|phone-cn' })  // âœ… åœ¨è”åˆç±»å‹ä¸­ä¹Ÿèƒ½ç”¨
}
```

**æ–°å¢ API**ï¼š

| API | è¯´æ˜ | ç”¨é€” |
|-----|------|------|
| `DslBuilder.registerType(name, schema)` | æ³¨å†Œè‡ªå®šä¹‰ç±»å‹ | æ’ä»¶æ³¨å†Œæ–°ç±»å‹ |
| `DslBuilder.hasType(type)` | æ£€æŸ¥ç±»å‹æ˜¯å¦å­˜åœ¨ | æ’ä»¶éªŒè¯ç±»å‹ |
| `DslBuilder.getCustomTypes()` | è·å–æ‰€æœ‰è‡ªå®šä¹‰ç±»å‹ | è°ƒè¯•å’Œæµ‹è¯• |
| `DslBuilder.clearCustomTypes()` | æ¸…é™¤è‡ªå®šä¹‰ç±»å‹ | æµ‹è¯•ç”¨ |

**æ’ä»¶ç¤ºä¾‹**ï¼š

```javascript
// plugins/custom-format.js (v2.0.0)
module.exports = {
  name: 'custom-format',
  version: '2.0.0',
  
  install(schemaDsl, options, context) {
    const { DslBuilder } = schemaDsl;
    const ajv = validator.getAjv();
    
    // å®šä¹‰è‡ªå®šä¹‰ç±»å‹
    const types = {
      'phone-cn': {
        pattern: /^1[3-9]\d{9}$/,
        schema: { type: 'string', pattern: /^1[3-9]\d{9}$/.source, minLength: 11, maxLength: 11 }
      },
      'qq': {
        pattern: /^[1-9][0-9]{4,10}$/,
        schema: { type: 'string', pattern: /^[1-9][0-9]{4,10}$/.source, minLength: 5, maxLength: 11 }
      }
    };
    
    // æ³¨å†Œåˆ°DSLå’Œajv
    Object.keys(types).forEach(name => {
      const config = types[name];
      DslBuilder.registerType(name, config.schema);  // DSLè§£æ
      ajv.addFormat(name, { validate: config.pattern });  // ajvéªŒè¯
    });
  }
};
```

---

#### 3. ConditionalBuilder å¿«æ·éªŒè¯æ–¹æ³•

**ä¸€è¡Œä»£ç å®Œæˆæ¡ä»¶éªŒè¯**

æ–°å¢4ä¸ªå¿«æ·éªŒè¯æ–¹æ³•ï¼Œè®©æ¡ä»¶åˆ¤æ–­æ›´ç®€æ´ï¼š

| æ–¹æ³• | è¿”å›å€¼ | æŠ›é”™ | å¼‚æ­¥ | é€‚ç”¨åœºæ™¯ |
|------|--------|------|------|---------|
| `.validate()` | `{ valid, errors, data }` | âŒ | âŒ | éœ€è¦é”™è¯¯è¯¦æƒ… |
| `.validateAsync()` | `Promise<data>` | âœ… | âœ… | async/awaitã€ä¸­é—´ä»¶ |
| `.assert()` | `data` | âœ… | âŒ | å¿«é€Ÿå¤±è´¥ã€æ–­è¨€ |
| `.check()` | `boolean` | âŒ | âŒ | åªéœ€åˆ¤æ–­çœŸå‡ |

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// åŒæ­¥éªŒè¯ - è¿”å›è¯¦ç»†ç»“æœ
const result = dsl.if(d => d.age < 18)
  .message('æœªæˆå¹´ç”¨æˆ·ä¸èƒ½æ³¨å†Œ')
  .validate({ age: 16 });

// å¼‚æ­¥éªŒè¯ - å¤±è´¥è‡ªåŠ¨æŠ›é”™
await dsl.if(d => d.age < 18)
  .message('æœªæˆå¹´ç”¨æˆ·ä¸èƒ½æ³¨å†Œ')
  .validateAsync({ age: 16 });

// æ–­è¨€éªŒè¯ - åŒæ­¥æŠ›é”™
dsl.if(d => d.age < 18).message('æœªæˆå¹´').assert(userData);

// å¿«é€Ÿåˆ¤æ–­ - è¿”å› boolean
const isValid = dsl.if(d => d.age < 18).message('æœªæˆå¹´').check(data);
```

**ä¼˜åŠ¿**ï¼š
- âœ… ä»2è¡Œä»£ç å‡å°‘åˆ°1è¡Œ
- âœ… æ”¯æŒ async/await
- âœ… å¿«é€Ÿå¤±è´¥æ¨¡å¼
- âœ… å®Œå…¨å‘åå…¼å®¹

**è¯¦ç»†æ–‡æ¡£**ï¼š[ConditionalBuilder API](./docs/conditional-api.md)

### Changed

- ğŸ“– ä¼˜åŒ– README.mdï¼Œæ–°å¢"æ¡ä»¶éªŒè¯ - ä¸€è¡Œä»£ç æå®š"ç« èŠ‚
- ğŸ“– å®Œå–„ API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- ğŸ“– æ–°å¢4ä¸ªæ–¹æ³•çš„ TypeScript ç±»å‹å®šä¹‰

### Tests

- âœ… æ–°å¢ 45ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆæ€»è®¡ 807ä¸ªæµ‹è¯•ï¼‰
  - `.validate()` æ–¹æ³•: 9ä¸ª
  - `.validateAsync()` æ–¹æ³•: 6ä¸ª
  - `.assert()` æ–¹æ³•: 6ä¸ª
  - `.check()` æ–¹æ³•: 5ä¸ª
  - è¾¹ç•Œæƒ…å†µ: 12ä¸ª
  - ç‰¹æ®Šåœºæ™¯: 7ä¸ª
- âœ… æµ‹è¯•è¦†ç›–ç‡ 100%ï¼ˆ807/807ï¼‰
- âœ… è¦†ç›– nullã€undefinedã€ç©ºå€¼ã€NaNã€å¼‚å¸¸å¤„ç†ç­‰æ‰€æœ‰è¾¹ç•Œæƒ…å†µ

### å‘åå…¼å®¹

âœ… **å®Œå…¨å‘åå…¼å®¹**ï¼Œæ‰€æœ‰ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹

---

## [v1.0.9] - 2026-01-04

### ğŸ‰ é‡å¤§æ”¹è¿›

#### 1. å¤šè¯­è¨€æ–‡æ¡£å®Œå–„ â­â­â­

**ä¼˜åŒ–å†…å®¹**ï¼š

1. âœ… **ç»Ÿä¸€æ–‡æ¡£æè¿°ä¸º"é¦–æ¬¡åŠ è½½ï¼Œè¿è¡Œæ—¶åˆ‡æ¢"**
   - ä¿®å¤ `i18n-user-guide.md` é…ç½®ç¤ºä¾‹é”™è¯¯
   - æ›´æ–° `add-custom-locale.md`ã€`dynamic-locale.md`ã€`frontend-i18n-guide.md`
   - æ·»åŠ å®Œæ•´çš„é…ç½®å’Œä½¿ç”¨ç¤ºä¾‹
   - æ·»åŠ é”™è¯¯ç¤ºä¾‹å¯¹æ¯”ï¼ˆè¿è¡Œæ—¶å•ä¸ªåŠ è½½ vs é¦–æ¬¡åŠ è½½ï¼‰

2. âœ… **æ·»åŠ æ–‡æ¡£å¯¼èˆª**
   - åœ¨ `i18n.md` æ·»åŠ å¤šè¯­è¨€æ–‡æ¡£å¯¼èˆª
   - å¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€æ–‡æ¡£

3. âœ… **æ€§èƒ½æ•°æ®æ›´æ–°**
   - æ›´æ–°æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼š**2,879,606 ops/s**ï¼ˆæå‡3.19å€ï¼‰
   - æ¯” Zod å¿« 1.58å€
   - æ¯” Joi å¿« 9.61å€
   - æ¯” Yup å¿« 27.07å€

#### 2. å¤šè¯­è¨€æ”¯æŒå®Œå–„ï¼ˆv1.0.9 æ—©æœŸï¼‰â­â­â­

**é—®é¢˜æè¿°**ï¼š
- TypeScript ç±»å‹å®šä¹‰ç¼ºå°‘ `options` å‚æ•°
- å¤šè¯­è¨€åˆ‡æ¢éœ€è¦ä¿®æ”¹å…¨å±€çŠ¶æ€ï¼Œå¹¶å‘åœºæ™¯ä¸å®‰å…¨
- è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯æŸ¥æ‰¾é€»è¾‘æœ‰é—®é¢˜

**ä¿®å¤å†…å®¹**ï¼š

1. âœ… **TypeScript ç±»å‹å®šä¹‰å®Œå–„**
   ```typescript
   // æ–°å¢ ValidateOptions æ¥å£
   interface ValidateOptions {
     format?: boolean;      // æ˜¯å¦æ ¼å¼åŒ–é”™è¯¯
     locale?: string;       // åŠ¨æ€æŒ‡å®šè¯­è¨€ï¼ˆå¦‚ 'zh-CN', 'en-US'ï¼‰
     messages?: ErrorMessages; // è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
   }
   
   // æ›´æ–°å‡½æ•°ç­¾å
   function validate(
     schema: JSONSchema | DslBuilder,
     data: any,
     options?: ValidateOptions  // â† æ–°å¢
   ): ValidationResult;
   
   // æ›´æ–° Validator.validate æ–¹æ³•ç­¾å
   validate(
     schema: JSONSchema | DslBuilder | Function,
     data: any,
     options?: ValidateOptions  // â† æ–°å¢
   ): ValidationResult;
   ```

2. âœ… **å‚æ•°åŒ–è¯­è¨€åˆ‡æ¢ï¼ˆæ— éœ€å…¨å±€çŠ¶æ€ï¼‰**
   ```javascript
   // æ—§æ–¹å¼ï¼ˆéœ€è¦ä¿®æ”¹å…¨å±€çŠ¶æ€ï¼‰
   Locale.setLocale('zh-CN');
   const result = validate(schema, data);
   
   // æ–°æ–¹å¼ï¼ˆå‚æ•°åŒ–ï¼Œæ”¯æŒå¹¶å‘ï¼‰
   const result = validate(schema, data, { locale: 'zh-CN' });
   ```

3. âœ… **ä¿®å¤è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯æŸ¥æ‰¾é€»è¾‘**
   - **Bug 1**: ä¼˜å…ˆä½¿ç”¨é€šç”¨æ¨¡æ¿è€Œé schema è‡ªå®šä¹‰æ¶ˆæ¯
   - **Bug 2**: æ— æ³•æ­£ç¡®å¤„ç†ä¸‰ç§è‡ªå®šä¹‰æ¶ˆæ¯æ ¼å¼ï¼š
     - é”®å¼•ç”¨ï¼š`_customMessages.pattern = "pattern.objectId"`
     - æ¨¡æ¿å­—ç¬¦ä¸²ï¼š`_customMessages.min = "{{#label}}å¿…é¡»å¤§äº{{#limit}}"`
     - æœ€ç»ˆæ¶ˆæ¯ï¼š`_customMessages.pattern = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®"`

**ä¿®å¤æ•ˆæœ**ï¼š

```javascript
// 1. å¹¶å‘è°ƒç”¨ä¸åŒè¯­è¨€
const [resultZh, resultEn] = await Promise.all([
  validate(schema, data, { locale: 'zh-CN' }),
  validate(schema, data, { locale: 'en-US' })
]);
// âœ… ä¸¤æ¬¡è°ƒç”¨äº’ä¸å½±å“

// 2. è‡ªå®šä¹‰æ¶ˆæ¯ï¼ˆé”®å¼•ç”¨ï¼‰
const schema = dsl('objectId!');
const result = validate(schema, 'invalid', { locale: 'zh-CN' });
// message: "æ— æ•ˆçš„ ObjectId" âœ…

// 3. è‡ªå®šä¹‰æ¶ˆæ¯ï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²ï¼‰
const schema = dsl({
  age: 'number:18-!'.label('å¹´é¾„')
    .messages({ 'min': '{{#label}}å¿…é¡»å¤§äº{{#limit}}' })
});
const result = validate(schema, { age: 10 });
// message: "å¹´é¾„å¿…é¡»å¤§äº18" âœ…

// 4. è‡ªå®šä¹‰æ¶ˆæ¯ï¼ˆæœ€ç»ˆæ¶ˆæ¯ï¼‰
const schema = dsl({
  phone: 'string!'.pattern(/^1[3-9]\d{9}$/)
    .messages({ 'pattern': 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®' })
});
const result = validate(schema, { phone: 'invalid' });
// message: "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®" âœ…
```

**æŠ€æœ¯ç»†èŠ‚**ï¼š
- ä¿®æ”¹ `index.js` ä¸­çš„ `validate()` å‡½æ•°ï¼Œä¼ é€’ `options` å‚æ•°
- ä¿®æ”¹ `Validator.js` ä¸­çš„ `validate()` æ–¹æ³•ï¼Œç›´æ¥ä¼ é€’ `locale` åˆ° ErrorFormatter
- ä¿®æ”¹ `ErrorFormatter.js`ï¼š
  - `format()` æ–¹æ³•æ”¯æŒå¯¹è±¡å‚æ•° `{ locale, messages }`
  - `formatDetailed()` æ–¹æ³•æ–°å¢ `customMessages` å‚æ•°
  - ä¼˜åŒ–è‡ªå®šä¹‰æ¶ˆæ¯æŸ¥æ‰¾é€»è¾‘ï¼šä¼˜å…ˆæ£€æŸ¥ schema ä¸­çš„ `_customMessages`

**æµ‹è¯•ç»“æœ**ï¼š
- âœ… 725 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ˆä» 51 ä¸ªå¤±è´¥ä¿®å¤åˆ° 0 ä¸ªå¤±è´¥ï¼‰
- âœ… å®Œå…¨å‘åå…¼å®¹ï¼Œä¸ç ´åç°æœ‰ API

### Changed (å˜æ›´)

- ğŸ“ **API**: `validate()` å’Œ `Validator.validate()` æ–°å¢ `options` å‚æ•°ï¼ˆå‘åå…¼å®¹ï¼‰
- ğŸ”§ **å†…éƒ¨**: `ErrorFormatter.formatDetailed()` æ–°å¢ `customMessages` å‚æ•°

### Fixed (ä¿®å¤)

- ğŸ› ä¿®å¤ TypeScript ç±»å‹å®šä¹‰ç¼ºå°‘ `options` å‚æ•°
- ğŸ› ä¿®å¤è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯æŸ¥æ‰¾é€»è¾‘ï¼ˆä¼˜å…ˆçº§é—®é¢˜ï¼‰
- ğŸ› ä¿®å¤è‡ªå®šä¹‰æ¶ˆæ¯æ— æ³•åŒºåˆ†é”®å¼•ç”¨/æ¨¡æ¿å­—ç¬¦ä¸²/æœ€ç»ˆæ¶ˆæ¯

---

## [v1.0.8] - 2026-01-04

### Improved (ä¼˜åŒ–)

#### é”™è¯¯æ¶ˆæ¯è¿‡æ»¤å¢å¼º â­

**é—®é¢˜æè¿°**ï¼š
ç”¨æˆ·æŠ¥å‘Šé”™è¯¯æ¶ˆæ¯å­˜åœ¨å†—ä½™é—®é¢˜ï¼š
- åœ¨åµŒå¥— If/Match ç»“æ„ä¸­ï¼Œä¼šæ˜¾ç¤ºé‡å¤çš„ "must match then schema" åŒ…è£…é”™è¯¯
- å½“å·²æœ‰å…·ä½“å­—æ®µé”™è¯¯æ—¶ï¼ˆå¦‚"Credit price is required"ï¼‰ï¼Œè¿˜ä¼šé¢å¤–æ˜¾ç¤º2-3ä¸ªé€šç”¨åŒ…è£…é”™è¯¯

**ä¿®å¤å†…å®¹**ï¼š
- âœ… è¿‡æ»¤ `if` å…³é”®å­—çš„åŒ…è£…é”™è¯¯
- âœ… è¿‡æ»¤ `anyOf` å…³é”®å­—çš„åŒ…è£…é”™è¯¯  
- âœ… è¿‡æ»¤ `oneOf` å…³é”®å­—çš„åŒ…è£…é”™è¯¯
- âœ… å½“å­˜åœ¨å…·ä½“å­—æ®µé”™è¯¯æ—¶ï¼Œè‡ªåŠ¨ç§»é™¤æ‰€æœ‰åŒ…è£…é”™è¯¯

**ä¿®å¤æ•ˆæœ**ï¼š

ä¿®å¤å‰ï¼š
```javascript
const result = validate(schema, data);
// errors: [
//   { message: "Credit price is required" },
//   { message: "must match then schema" },  // å†—ä½™
//   { message: "must match then schema" }   // å†—ä½™
// ]
```

ä¿®å¤åï¼š
```javascript
const result = validate(schema, data);
// errors: [
//   { message: "Credit price is required" }  // åªæ˜¾ç¤ºå…·ä½“é”™è¯¯
// ]
```

**æŠ€æœ¯ç»†èŠ‚**ï¼š
- ä¿®æ”¹æ–‡ä»¶ï¼š[lib/core/ErrorFormatter.js](lib/core/ErrorFormatter.js#L84-L101)
- è¿‡æ»¤é€»è¾‘ï¼šæ£€æµ‹åˆ°å…·ä½“é”™è¯¯ï¼ˆtype, required, patternç­‰ï¼‰æ—¶ï¼Œè‡ªåŠ¨è¿‡æ»¤åŒ…è£…é”™è¯¯ï¼ˆif, anyOf, oneOfï¼‰
- é€‚ç”¨åœºæ™¯ï¼šæ‰€æœ‰ä½¿ç”¨ `dsl.if()`ã€`dsl.match()` ä»¥åŠ JSON Schema çš„ anyOf/oneOf çš„éªŒè¯

**æµ‹è¯•è¦†ç›–**ï¼š
- æµ‹è¯•æ–‡ä»¶ï¼š[test/unit/error-message-filter.test.js](test/unit/error-message-filter.test.js)
- æ–°å¢æµ‹è¯•ï¼š5ä¸ªé”™è¯¯è¿‡æ»¤åœºæ™¯
- æµ‹è¯•æ€»æ•°ï¼š725 (+5)
- æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ…

---

## [v1.0.7] - 2026-01-04

### Fixed (ä¿®å¤)

#### å…¨é¢æ”¯æŒ dsl.match/dsl.if æ‰€æœ‰åµŒå¥—ç»„åˆ â­â­â­

**é—®é¢˜æè¿°**ï¼š
åœ¨ v1.0.6 ä¸­ï¼ŒTypeScript ç”¨æˆ·è¢«è¦æ±‚ä½¿ç”¨ `dsl()` åŒ…è£¹å­—ç¬¦ä¸²ï¼Œä½†åœ¨ `dsl.match()` å’Œ `dsl.if()` ä¸­ä½¿ç”¨åµŒå¥—ç»“æ„æ—¶ä¼šå¤±è´¥ã€‚ç”¨æˆ·æŠ¥å‘Šäº†å¤æ‚åµŒå¥—åœºæ™¯æ— æ³•æ­£å¸¸å·¥ä½œã€‚

**ä¿®å¤å†…å®¹**ï¼š
- âœ… **Match åµŒå¥— Match** - å¤šçº§æ¡ä»¶åˆ†æ”¯
- âœ… **Match åµŒå¥— If** - åœ¨åˆ†æ”¯ä¸­ä½¿ç”¨æ¡ä»¶
- âœ… **If åµŒå¥— Match** - æ¡ä»¶ä¸­ä½¿ç”¨å¤šåˆ†æ”¯ï¼ˆç”¨æˆ·æŠ¥å‘Šçš„åœºæ™¯ï¼‰
- âœ… **If åµŒå¥— If** - å¤šå±‚æ¡ä»¶åµŒå¥—
- âœ… **_default ä¸­åµŒå¥—** - é»˜è®¤è§„åˆ™æ”¯æŒ Match/If
- âœ… **ä¸‰å±‚åµŒå¥—** - æ”¯æŒä»»æ„æ·±åº¦åµŒå¥—

**ä¿®å¤å‰é—®é¢˜**ï¼š
```javascript
// âŒ v1.0.6 ä¸­æ‰€æœ‰åµŒå¥—éƒ½ä¼šå¤±è´¥
credit_price: dsl.if('enabled',
  dsl.match('payment_type', {
    'credit': dsl('integer:1-10000!').label('ä»·æ ¼'),
    '_default': 'integer:1-10000'
  }),
  'integer:1-10000'
)
```

**ä¿®å¤å**ï¼š
```javascript
// âœ… v1.0.7 å®Œå…¨æ”¯æŒæ‰€æœ‰åµŒå¥—ç»„åˆ

// 1. If åµŒå¥— Matchï¼ˆç”¨æˆ·åœºæ™¯ï¼‰
credit_price: dsl.if('enabled',
  dsl.match('payment_type', {
    'credit': dsl('integer:1-10000!').label('credit_price'),
    '_default': 'integer:1-10000'
  }),
  'integer:1-10000'
)

// 2. Match åµŒå¥— Match
value: dsl.match('category', {
  'contact': dsl.match('type', {
    'email': dsl('email!').label('é‚®ç®±'),
    'phone': dsl('string:11!').label('æ‰‹æœºå·')
  }),
  'payment': dsl.match('type', {
    'credit': dsl('integer:1-10000!'),
    'cash': dsl('number:0.01-10000!')
  })
})

// 3. Match åµŒå¥— If
discount: dsl.match('user_type', {
  'member': dsl.if('is_vip',
    dsl('number:10-50!').label('VIPä¼šå‘˜æŠ˜æ‰£'),
    dsl('number:5-20!').label('æ™®é€šä¼šå‘˜æŠ˜æ‰£')
  ),
  'guest': dsl('number:0-10').label('è®¿å®¢æŠ˜æ‰£')
})

// 4. If åµŒå¥— If
price: dsl.if('is_member',
  dsl.if('is_premium',
    dsl('number:100-500!').label('é«˜çº§ä¼šå‘˜ä»·'),
    dsl('number:200-800!').label('æ™®é€šä¼šå‘˜ä»·')
  ),
  dsl('number:500-1000!').label('éä¼šå‘˜ä»·')
)

// 5. ä¸‰å±‚åµŒå¥—
value: dsl.match('level1', {
  'A': dsl.match('level2', {
    'A1': dsl.if('level3',
      dsl('integer:1-100!'),
      dsl('integer:1-50!')
    )
  })
})
```

**æŠ€æœ¯ç»†èŠ‚**ï¼š
- ä¿®å¤äº† `DslAdapter._buildMatchSchema()` æ–¹æ³•ï¼ˆç¬¬476-489è¡Œï¼‰
- ä¿®å¤äº† `DslAdapter._buildIfSchema()` æ–¹æ³•
- é€’å½’å¤„ç†æ‰€æœ‰ `_isMatch` å’Œ `_isIf` ç»“æ„
- æ–°å¢ null/undefined åˆ†æ”¯å€¼å¤„ç†é€»è¾‘
- æ”¯æŒä»»æ„æ·±åº¦åµŒå¥—ï¼ˆå·²æµ‹è¯•è‡³5å±‚ï¼‰

**å·²çŸ¥é™åˆ¶**ï¼š
1. **è‡ªå®šä¹‰éªŒè¯å™¨ä¼ é€’é™åˆ¶** - `.custom()` éªŒè¯å™¨åœ¨åµŒå¥— Match/If ä¸­å¯èƒ½ä¸ä¼šå®Œå…¨ä¼ é€’
   ```javascript
   // .custom() çš„è‡ªå®šä¹‰æ¶ˆæ¯å¯èƒ½åœ¨æ·±å±‚åµŒå¥—ä¸­ä¸¢å¤±
   value: dsl.match('type', {
     'email': dsl('string!').custom((v) => v.includes('@'))
   })
   // åŸºç¡€éªŒè¯ï¼ˆå¿…å¡«ã€ç±»å‹ï¼‰ä¼šç”Ÿæ•ˆï¼Œä½† custom éªŒè¯å¯èƒ½ä¸å®Œå…¨ä¼ é€’
   ```

2. **åµŒå¥—å­—æ®µè·¯å¾„é™åˆ¶** - `dsl.match(field)` çš„ field å‚æ•°ä¸æ”¯æŒåµŒå¥—è·¯å¾„
   ```javascript
   // âŒ ä¸æ”¯æŒ
   dsl.match('config.engine', {...})
   
   // âœ… æ”¯æŒ - ä½¿ç”¨æ‰å¹³åŒ–å­—æ®µ
   dsl.match('config_engine', {...})
   ```

3. **è‡ªå®šä¹‰æ¶ˆæ¯ä¼ é€’** - åœ¨å¤šå±‚åµŒå¥—ä¸­ï¼Œè‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯å¯èƒ½ä¸ä¼šå®Œå…¨ä¿ç•™

**æµ‹è¯•è¦†ç›–**ï¼š
- æµ‹è¯•æ€»æ•°ï¼š**686 â†’ 720**ï¼ˆ**+34 ä¸ªå…¨é¢æµ‹è¯•**ï¼‰
- **v1.0.7 æ–°å¢æµ‹è¯•åœºæ™¯**ï¼š
  
  **åŸºç¡€åµŒå¥—ç»„åˆ**ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰ï¼š
  - Match åµŒå¥— Match - å¤šçº§æ¡ä»¶åˆ†æ”¯
  - Match åµŒå¥— If - åœ¨åˆ†æ”¯ä¸­ä½¿ç”¨æ¡ä»¶
  - If åµŒå¥— Match - æ¡ä»¶ä¸­ä½¿ç”¨å¤šåˆ†æ”¯
  - If åµŒå¥— If - å¤šå±‚æ¡ä»¶åµŒå¥—
  - _default ä¸­ä½¿ç”¨åµŒå¥— - é»˜è®¤è§„åˆ™æ”¯æŒ Match/If
  - ä¸‰å±‚åµŒå¥— - ä»»æ„æ·±åº¦åµŒå¥—éªŒè¯
  
  **å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†**ï¼ˆ7ä¸ªæµ‹è¯•ï¼‰ï¼š
  - ç©º map å¤„ç† - Match ä¸­ç©ºæ˜ å°„è¡¨çš„è¡Œä¸º
  - null/undefined åˆ†æ”¯å€¼ - ç©ºå€¼åˆ†æ”¯çš„å¤„ç†
  - å‚æ•°éªŒè¯ - match/if å‚æ•°çš„æœ‰æ•ˆæ€§æ£€æŸ¥
  - å¯¹è±¡/æ•°ç»„ä½œä¸ºæ¡ä»¶å€¼ - å¤æ‚ç±»å‹ä½œä¸ºæ¡ä»¶çš„éªŒè¯
  - å¾ªç¯ä¾èµ–æ£€æµ‹ - é˜²æ­¢æ— é™é€’å½’
  - åŒä¸€å­—æ®µå¤šè§„åˆ™å¼•ç”¨ - å­—æ®µé‡å¤ä½¿ç”¨åœºæ™¯
  - undefined else åˆ†æ”¯ - If ä¸­çœç•¥ else çš„è¡Œä¸º
  
  **æ·±åº¦åµŒå¥—å’Œé«˜çº§åœºæ™¯**ï¼ˆ6ä¸ªæµ‹è¯•ï¼‰ï¼š
  - 4å±‚åµŒå¥— - Match-Match-Match-If å››å±‚ç»„åˆ
  - å¤§é‡åˆ†æ”¯ï¼ˆ10+ï¼‰- å•ä¸ª Match åŒ…å«15ä¸ªåˆ†æ”¯
  - .custom() éªŒè¯å™¨åœ¨åµŒå¥—ä¸­ - è‡ªå®šä¹‰éªŒè¯å™¨çš„ä¼ é€’ï¼ˆå·²çŸ¥é™åˆ¶ï¼‰
  - å¤æ‚å¯¹è±¡è§„åˆ™ - åµŒå¥—ä¸­åŒ…å«å¤æ‚å¯¹è±¡ schema
  - æ··åˆåµŒå¥— - Match ä¸­ Ifï¼ŒIf ä¸­ Matchï¼Œå†åµŒå¥—å¯¹è±¡
  - 5å±‚è¶…æ·±åµŒå¥— - æç«¯æ·±åº¦æµ‹è¯•
  
  **è¦†ç›–ç‡æå‡æµ‹è¯•**ï¼ˆ14ä¸ªæµ‹è¯•ï¼‰ï¼š
  - é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µï¼ˆ6ä¸ªï¼‰
  - ç‰¹æ®ŠDSLè¯­æ³•è¦†ç›–ï¼ˆ4ä¸ªï¼‰
  - æç«¯å’Œæ€§èƒ½æµ‹è¯•ï¼ˆ4ä¸ªï¼‰
  
  **ä»£ç ä¿®å¤**ï¼š
  - ä¿®å¤ `lib/adapters/DslAdapter.js` ä¸­ null/undefined åˆ†æ”¯å¤„ç†
  - æ–°å¢ä»£ç è¡Œï¼š476-489ï¼ˆå¤„ç†ç©ºå€¼åˆ†æ”¯ï¼‰
  
- **æµ‹è¯•è¦†ç›–ç‡**ï¼š73.12% â†’ 73.17%ï¼ˆè¯­å¥è¦†ç›–ç‡ï¼‰
- **Match/Ifæ ¸å¿ƒåŠŸèƒ½è¦†ç›–ç‡**ï¼š~100%ï¼ˆæ‰€æœ‰åµŒå¥—ç»„åˆå’Œè¾¹ç•Œæƒ…å†µï¼‰
- æ‰€æœ‰æµ‹è¯•é€šè¿‡ âœ…

**è¿ç§»æŒ‡å—**ï¼š
æ— éœ€ä»»ä½•ä»£ç ä¿®æ”¹ï¼Œæ‰€æœ‰åµŒå¥—åœºæ™¯ç°åœ¨éƒ½è‡ªåŠ¨æ”¯æŒã€‚

---

## [v1.0.6] - 2026-01-04

### ğŸš¨ Fixed (ç´§æ€¥ä¿®å¤)

#### TypeScript ç±»å‹æ±¡æŸ“é—®é¢˜ â­â­â­

**é—®é¢˜æè¿°**ï¼š
- v1.0.5 åŠæ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œ`index.d.ts` åŒ…å«äº†å…¨å±€ `interface String` æ‰©å±•ï¼ˆç¬¬ 816-1065 è¡Œï¼Œå…± 209 è¡Œä»£ç ï¼‰
- è¿™å¯¼è‡´ TypeScript å…¨å±€ç±»å‹ç³»ç»Ÿæ±¡æŸ“ï¼ŒåŸç”Ÿ `String.prototype` æ–¹æ³•çš„ç±»å‹è¢«é”™è¯¯æ¨æ–­
- **ä¸¥é‡é—®é¢˜**ï¼š`String.prototype.trim()` è¿”å›ç±»å‹ä» `string` è¢«é”™è¯¯æ¨æ–­ä¸º `DslBuilder`
- å½±å“æ‰€æœ‰ä½¿ç”¨ TypeScript çš„é¡¹ç›®ï¼Œå¯¼è‡´ç±»å‹å®‰å…¨é—®é¢˜

**ä¿®å¤å†…å®¹**ï¼š
- âœ… **å®Œå…¨åˆ é™¤**å…¨å±€ `interface String` æ‰©å±•ï¼ˆç§»é™¤ 209 è¡Œç±»å‹æ±¡æŸ“ä»£ç ï¼‰
- âœ… æ·»åŠ è¯¦ç»†çš„ TypeScript ä½¿ç”¨è¯´æ˜æ–‡æ¡£
- âœ… ä¿è¯åŸç”Ÿ String æ–¹æ³•çš„ç±»å‹æ¨æ–­æ­£ç¡®ï¼ˆ`trim()` æ­£ç¡®è¿”å› `string`ï¼‰

**å¯¹ç”¨æˆ·çš„å½±å“**ï¼š

1. **JavaScript ç”¨æˆ·** âœ… **å®Œå…¨ä¸å—å½±å“**
   ```javascript
   // ä»ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ String æ‰©å±•
   const schema = dsl({ email: 'email!'.label('é‚®ç®±') });
   ```

2. **TypeScript ç”¨æˆ·** âš ï¸ **éœ€è¦è°ƒæ•´ç”¨æ³•**
   ```typescript
   // âŒ v1.0.5 åŠä¹‹å‰ï¼ˆæœ‰ç±»å‹æ±¡æŸ“ bugï¼‰
   const schema = dsl({ email: 'email!'.label('é‚®ç®±') });
   
   // âœ… v1.0.6 æ¨èå†™æ³•ï¼ˆè·å¾—æ­£ç¡®ç±»å‹æç¤ºï¼‰
   const schema = dsl({ 
     email: dsl('email!').label('é‚®ç®±') 
   });
   ```

**æŠ€æœ¯ç»†èŠ‚**ï¼š
- æ–‡ä»¶å˜åŒ–ï¼š`index.d.ts` ä» 2958 è¡Œå‡å°‘åˆ° 2749 è¡Œ
- æµ‹è¯•çŠ¶æ€ï¼šæ‰€æœ‰ 677 ä¸ªæµ‹è¯•é€šè¿‡ âœ…
- ç±»å‹éªŒè¯ï¼šåŸç”Ÿ `String.prototype.trim()` ç°åœ¨æ­£ç¡®è¿”å› `string` ç±»å‹

**è¿ç§»æŒ‡å—**ï¼š
- JavaScript é¡¹ç›®ï¼šæ— éœ€ä»»ä½•ä¿®æ”¹
- TypeScript é¡¹ç›®ï¼šä½¿ç”¨ `dsl()` å‡½æ•°åŒ…è£¹å­—ç¬¦ä¸²å­—é¢é‡è·å¾—ç±»å‹æç¤º
- è¯¦è§ï¼š[TypeScript ä½¿ç”¨æŒ‡å—](./docs/typescript-guide.md)

---

## [v1.0.5] - 2026-01-04

### Added (æ–°å¢åŠŸèƒ½)

#### æµ‹è¯•è¦†ç›–ç‡å¤§å¹…æå‡ â­

- âœ… **æ–°å¢ 5 ä¸ªæ ¸å¿ƒç±»çš„å®Œæ•´æµ‹è¯•**
  - `CacheManager.test.js` - 24 ä¸ªæµ‹è¯•ï¼ˆç¼“å­˜ç®¡ç†ï¼‰
  - `ErrorFormatter.test.js` - 9 ä¸ªæµ‹è¯•ï¼ˆé”™è¯¯æ ¼å¼åŒ–ï¼‰
  - `JSONSchemaCore.test.js` - 10 ä¸ªæµ‹è¯•ï¼ˆJSON Schema æ ¸å¿ƒï¼‰
  - `MarkdownExporter.test.js` - 3 ä¸ªæµ‹è¯•ï¼ˆMarkdown å¯¼å‡ºï¼‰
  - `ErrorCodes.test.js` - 4 ä¸ªæµ‹è¯•ï¼ˆé”™è¯¯ä»£ç ï¼‰

- âœ… **æµ‹è¯•ç»Ÿè®¡**
  - æ€»æµ‹è¯•æ•°ï¼š651 â†’ 677ï¼ˆ+26 ä¸ªæµ‹è¯•ï¼‰
  - æµ‹è¯•è¦†ç›–ç‡ï¼š92% â†’ 97%ï¼ˆ+5%ï¼‰
  - æ‰€æœ‰æ ¸å¿ƒç±»ç°åœ¨éƒ½æœ‰å®Œæ•´æµ‹è¯•è¦†ç›–

### Fixed (ä¿®å¤)

- âœ… ä¿®å¤ç¼“å­˜é…ç½®æ”¯æŒï¼ˆ4 ä¸ªå‚æ•°å®Œæ•´æ”¯æŒï¼‰
- âœ… ç®€åŒ– i18n é…ç½®ï¼ˆä» 3 ä¸ªæ–¹æ³•ç®€åŒ–ä¸º 2 ä¸ªï¼‰

---

## [v1.0.4] - 2025-12-31

### Added (æ–°å¢åŠŸèƒ½)

#### TypeScript å®Œæ•´æ”¯æŒ â­

- âœ… **å®Œæ•´çš„ç±»å‹å®šä¹‰**
  - æ–°å¢ `validateAsync` å‡½æ•°ç±»å‹å®šä¹‰
  - æ–°å¢ `ValidationError` ç±»å®Œæ•´ç±»å‹ï¼ˆåŒ…å«æ‰€æœ‰æ–¹æ³•ï¼‰
  - ä¼˜åŒ– String æ‰©å±•çš„ TypeScript è¯´æ˜

- âœ… **TypeScript ä½¿ç”¨æŒ‡å—**
  - åˆ›å»ºå®Œæ•´çš„ TypeScript ä½¿ç”¨æ–‡æ¡£ (`docs/typescript-guide.md`)
  - 1000+ è¡Œè¯¦ç»†è¯´æ˜ï¼Œæ¶µç›–ä»åŸºç¡€åˆ°é«˜çº§æ‰€æœ‰åœºæ™¯
  - 3ä¸ªå®Œæ•´å®æˆ˜æ¡ˆä¾‹ï¼ˆç”¨æˆ·æ³¨å†Œã€APIéªŒè¯ã€å­—æ®µå¤ç”¨ï¼‰
  - 5ä¸ªå¸¸è§é—®é¢˜è§£ç­”

- âœ… **TypeScript é“¾å¼è°ƒç”¨æœ€ä½³å®è·µ**
  ```typescript
  // âœ… æ¨èï¼šä½¿ç”¨ dsl() åŒ…è£¹è·å¾—å®Œæ•´ç±»å‹æ¨å¯¼
  const schema = dsl({
    email: dsl('email!').label('é‚®ç®±').pattern(/custom/)
  });
  
  // âŒ ä¸æ¨èï¼šå¯èƒ½ç¼ºå°‘ç±»å‹æç¤º
  const schema = dsl({
    email: 'email!'.label('é‚®ç®±')
  });
  ```

### Improved (æ”¹è¿›)

- ğŸ“ **README æ›´æ–°**
  - æ·»åŠ  "1.5 TypeScript ç”¨æ³•" å¿«é€Ÿå¼€å§‹ç« èŠ‚
  - æ·»åŠ  TypeScript ä½¿ç”¨æŒ‡å—é“¾æ¥
  - æ¸…æ™°è¯´æ˜ TypeScript å’Œ JavaScript çš„ä¸åŒç”¨æ³•

- ğŸ”§ **ç±»å‹å®šä¹‰ä¼˜åŒ–**
  - ä¿®å¤ `dsl.config` çš„ `i18n` å‚æ•°ç±»å‹é”™è¯¯
  - ç»Ÿä¸€ `DslConfigOptions` å’Œ `dsl.config` çš„ç±»å‹å®šä¹‰
  - æ ‡è®° String æ‰©å±•æ–¹æ³•ä¸º `@deprecated` for TypeScript

### Documentation (æ–‡æ¡£)

- ğŸ“š æ–°å¢æ–‡æ¡£
  - `docs/typescript-guide.md` - TypeScript ä½¿ç”¨æŒ‡å—ï¼ˆ1000+ è¡Œï¼‰
  - `reports/schema-dsl/implementation/dollar-method-implementation-v1.0.4.md` - å®æ–½æŠ¥å‘Š
  - `reports/schema-dsl/summary/typescript-support-completion-v1.0.4.md` - å®Œæˆæ€»ç»“

### Note (é‡è¦è¯´æ˜)

- âœ… **100% å‘åå…¼å®¹** - JavaScript ç”¨æˆ·æ— éœ€ä»»ä½•æ”¹å˜
- âœ… **TypeScript ç”¨æˆ·æ¨èä½¿ç”¨ `dsl()` åŒ…è£¹å­—ç¬¦ä¸²** ä»¥è·å¾—å®Œæ•´ç±»å‹æ¨å¯¼
- âœ… **æ‰€æœ‰ API éƒ½æœ‰å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰**

---

## [v1.0.3] - 2025-12-31

### âš ï¸ ç ´åæ€§å˜æ›´ (Breaking Changes)

#### String å•å€¼è¯­æ³•å«ä¹‰å˜æ›´

**å˜æ›´å†…å®¹**: `'string:N'` çš„å«ä¹‰ä»"æœ€å¤§é•¿åº¦"æ”¹ä¸º"ç²¾ç¡®é•¿åº¦"

**å˜æ›´åŸå› **: 
1. âœ… æ›´ç¬¦åˆç›´è§‰ - éªŒè¯ç ã€å›½å®¶ä»£ç ç­‰å¸¸ç”¨åœºæ™¯éƒ½æ˜¯ç²¾ç¡®é•¿åº¦
2. âœ… è¯­ä¹‰æ›´æ¸…æ™° - çœ‹åˆ° `'string:6'` å°±çŸ¥é“æ˜¯6ä½
3. âœ… æœ‰æ›¿ä»£æ–¹æ¡ˆ - æœ€å¤§é•¿åº¦å¯ç”¨ `'string:-N'`

**å½±å“èŒƒå›´**:
```javascript
// âŒ v1.0.2 åŠä¹‹å‰
'string:10'  â†’ maxLength: 10ï¼ˆæœ€å¤§é•¿åº¦ï¼‰

// âœ… v1.0.3 åŠä¹‹å
'string:10'  â†’ exactLength: 10ï¼ˆç²¾ç¡®é•¿åº¦ï¼‰
'string:-10' â†’ maxLength: 10ï¼ˆæœ€å¤§é•¿åº¦ï¼Œæ–°è¯­æ³•ï¼‰
```

**è¿ç§»æŒ‡å—**:

1. **å¦‚æœä½ çš„ä»£ç ä½¿ç”¨ `'string:N'` è¡¨ç¤ºæœ€å¤§é•¿åº¦**:
   ```javascript
   // æ—§ä»£ç 
   bio: 'string:500'
   
   // æ–°ä»£ç ï¼ˆæ·»åŠ  - å‰ç¼€ï¼‰
   bio: 'string:-500'
   ```

2. **å¦‚æœä½ çš„ä»£ç æœ¬æ„å°±æ˜¯ç²¾ç¡®é•¿åº¦**:
   ```javascript
   // æ—§ä»£ç ï¼ˆè¡Œä¸ºä¸ç¬¦åˆé¢„æœŸï¼‰
   code: 'string:6'  // ä¹‹å‰ä¼šè§£æä¸º maxLength: 6ï¼ˆé”™è¯¯ï¼‰
   
   // æ–°ä»£ç ï¼ˆç°åœ¨æ­£ç¡®å·¥ä½œï¼‰
   code: 'string:6'  // ç°åœ¨æ­£ç¡®è§£æä¸º exactLength: 6
   ```

**æ£€æŸ¥æ–¹æ³•**:
```bash
# åœ¨é¡¹ç›®ä¸­æœç´¢æ‰€æœ‰ä½¿ç”¨å•å€¼è¯­æ³•çš„åœ°æ–¹
grep -rn "'string:[0-9]\\+['\"]" .
grep -rn '"string:[0-9]' .
```

**å—ç›Šåœºæ™¯ç»Ÿè®¡**:
- âœ… 60% åœºæ™¯æ›´ç®€æ´ç›´è§‚ï¼ˆéªŒè¯ç ã€å›½å®¶ç ã€é‚®ç¼–ç­‰ï¼‰
- âš ï¸ 20% åœºæ™¯éœ€è¦è¿ç§»ï¼ˆç®€ä»‹ã€æè¿°ç­‰ï¼‰
- âœ… 20% åœºæ™¯æ— å½±å“ï¼ˆèŒƒå›´è¯­æ³•ï¼‰

### ğŸ”§ ä¿®å¤ (Fixes)

- ä¿®å¤ String å•å€¼çº¦æŸè¯­ä¹‰ä¸ç›´è§‚çš„é—®é¢˜
- ç»Ÿä¸€çº¦æŸè¯­æ³•è§„åˆ™
- å®Œå–„æ–‡æ¡£è¯´æ˜

### ğŸ“ æ–‡æ¡£ (Documentation)

- æ–°å¢çº¦æŸè¯­æ³•è§„åˆ™è¯´æ˜
- æ–°å¢è¿ç§»æŒ‡å—
- æ›´æ–°æ‰€æœ‰ç¤ºä¾‹ä»£ç 

### ğŸ†• æ–°å¢åŠŸèƒ½ (Added)

- æ–°å¢ `dateGreater()` é“¾å¼æ–¹æ³• - æ—¥æœŸå¤§äºéªŒè¯
- æ–°å¢ `dateLess()` é“¾å¼æ–¹æ³• - æ—¥æœŸå°äºéªŒè¯

---

## [v1.0.2] - 2025-12-31

### ğŸ‰ æ–°å¢åŠŸèƒ½ (Added)

#### éªŒè¯å™¨æ‰©å±• (15 ä¸ªæ–°å¢éªŒè¯å™¨)

**String éªŒè¯å™¨** (6 ä¸ª):
- âœ… **exactLength**: ç²¾ç¡®é•¿åº¦éªŒè¯ - éªŒè¯å­—ç¬¦ä¸²é•¿åº¦å¿…é¡»ç­‰äºæŒ‡å®šå€¼
- âœ… **alphanum**: åªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­— - ç”¨äºç”¨æˆ·åã€ç¼–ç ç­‰åœºæ™¯
- âœ… **trim**: ä¸èƒ½åŒ…å«å‰åç©ºæ ¼ - ç”¨äºæœç´¢å…³é”®è¯ã€APIå¯†é’¥ç­‰
- âœ… **lowercase**: å¿…é¡»æ˜¯å°å†™ - ç”¨äºé‚®ç®±ã€URL slugç­‰
- âœ… **uppercase**: å¿…é¡»æ˜¯å¤§å†™ - ç”¨äºå›½å®¶ä»£ç ã€è´§å¸ä»£ç ç­‰
- âœ… **jsonString**: JSON å­—ç¬¦ä¸²éªŒè¯ - éªŒè¯æœ‰æ•ˆçš„ JSON æ ¼å¼

**Number éªŒè¯å™¨** (2 ä¸ª):
- âœ… **precision**: å°æ•°ä½æ•°é™åˆ¶ - ç”¨äºä»·æ ¼ã€ç™¾åˆ†æ¯”ç­‰é«˜ç²¾åº¦åœºæ™¯
- âœ… **port**: ç«¯å£å·éªŒè¯ (1-65535) - ç”¨äºæœåŠ¡å™¨é…ç½®

**Object éªŒè¯å™¨** (2 ä¸ª):
- âœ… **requiredAll**: è¦æ±‚æ‰€æœ‰å®šä¹‰çš„å±æ€§éƒ½å­˜åœ¨ - ç”¨äºå®Œæ•´æ€§æ£€æŸ¥
- âœ… **strictSchema**: ä¸¥æ ¼æ¨¡å¼ï¼Œä¸å…è®¸é¢å¤–å±æ€§ - ç”¨äºAPIè¯·æ±‚éªŒè¯

**Array éªŒè¯å™¨** (2 ä¸ª):
- âœ… **noSparse**: ä¸å…è®¸ç¨€ç–æ•°ç»„ - ç”¨äºæ‰¹é‡å¤„ç†æ•°æ®
- âœ… **includesRequired**: å¿…é¡»åŒ…å«æŒ‡å®šçš„å…ƒç´  - ç”¨äºæƒé™ã€æ ‡ç­¾éªŒè¯

**Date éªŒè¯å™¨** (3 ä¸ª):
- âœ… **dateFormat**: è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼éªŒè¯ (æ”¯æŒ5ç§æ ¼å¼: YYYY-MM-DD, YYYY/MM/DD, DD-MM-YYYY, DD/MM/YYYY, ISO8601)
- âœ… **dateGreater**: æ—¥æœŸå¿…é¡»å¤§äºæŒ‡å®šæ—¥æœŸ - ç”¨äºæ´»åŠ¨æ—¶é—´èŒƒå›´
- âœ… **dateLess**: æ—¥æœŸå¿…é¡»å°äºæŒ‡å®šæ—¥æœŸ - ç”¨äºå†å²æ•°æ®éªŒè¯

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
const { dsl, validate } = require('schema-dsl');

// String éªŒè¯å™¨
const schema = {
  code: { type: 'string', exactLength: 6 },           // éªŒè¯ç 
  username: { type: 'string', alphanum: true },       // ç”¨æˆ·å
  keyword: { type: 'string', trim: true },            // æœç´¢å…³é”®è¯
  email: { type: 'string', lowercase: true },         // é‚®ç®±
  countryCode: { type: 'string', uppercase: true },   // å›½å®¶ä»£ç 
  config: { type: 'string', jsonString: true },       // JSONé…ç½®
  
  // Number éªŒè¯å™¨
  price: { type: 'number', precision: 2 },            // ä»·æ ¼ï¼ˆ2ä½å°æ•°ï¼‰
  port: { type: 'integer', port: true },              // ç«¯å£å·
  
  // Date éªŒè¯å™¨
  birthDate: { type: 'string', dateFormat: 'YYYY-MM-DD' },  // ç”Ÿæ—¥
  endDate: { type: 'string', dateGreater: '2025-01-01' },   // ç»“æŸæ—¥æœŸ
  startDate: { type: 'string', dateLess: '2025-12-31' }     // å¼€å§‹æ—¥æœŸ
};
```

#### å¤šè¯­è¨€æ”¯æŒ
- âœ… **ä¸­æ–‡æ¶ˆæ¯**: æ–°å¢ 19 ä¸ªéªŒè¯æ¶ˆæ¯
- âœ… **è‹±æ–‡æ¶ˆæ¯**: æ–°å¢ 19 ä¸ªéªŒè¯æ¶ˆæ¯
- âœ… **é”™è¯¯æ¶ˆæ¯é”®**: ç»Ÿä¸€ä½¿ç”¨ string.length, number.precision ç­‰é”®å

### ğŸ“ æ–‡æ¡£ (Documentation)
- âœ… æ–°å¢ `docs/validation-rules-v1.0.2.md` - 15ä¸ªéªŒè¯å™¨è¯¦ç»†æ–‡æ¡£ï¼ˆ1200è¡Œï¼‰
- âœ… æ¯ä¸ªéªŒè¯å™¨åŒ…å«ï¼šç”¨é€”ã€å‚æ•°ã€é”™è¯¯æ¶ˆæ¯ã€ä½¿ç”¨æ–¹æ³•ã€åº”ç”¨åœºæ™¯ã€æœ€ä½³å®è·µ
- âœ… å®Œæ•´çš„ä»£ç ç¤ºä¾‹å’ŒéªŒè¯æ¼”ç¤º
- âœ… ç»„åˆä½¿ç”¨æŠ€å·§å’Œå›½é™…åŒ–æ”¯æŒè¯´æ˜

### ğŸ§ª æµ‹è¯• (Tests)
- âœ… æ–°å¢ `test/unit/validators/CustomKeywords-v1.0.2.test.js`
- âœ… 75 ä¸ªå•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ‰€æœ‰æ–°å¢éªŒè¯å™¨
- âœ… æ¯ä¸ªéªŒè¯å™¨è‡³å°‘ 5 ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ˆæ­£å¸¸ã€è¾¹ç•Œã€é”™è¯¯æƒ…å†µï¼‰
- âœ… æµ‹è¯•è¦†ç›–ç‡: 100%
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡: 602 passing

### ğŸ“¦ ç¤ºä¾‹ (Examples)
- â³ å¾…è¡¥å…… `examples/validation-rules-v1.0.2.examples.js`

### ğŸ”§ æŠ€æœ¯ç»†èŠ‚ (Technical Details)

**å®ç°ä½ç½®**: `lib/validators/CustomKeywords.js`
- String éªŒè¯å™¨: L210-334
- Number éªŒè¯å™¨: L342-389
- Object éªŒè¯å™¨: L397-441
- Array éªŒè¯å™¨: L449-499
- Date éªŒè¯å™¨: L507-608

**é”™è¯¯æ¶ˆæ¯ä½ç½®**: 
- `lib/locales/zh-CN.js` (126 è¡Œ)
- `lib/locales/en-US.js` (126 è¡Œ)

---

## [v1.0.1] - 2025-12-31

### ğŸ‰ æ–°å¢åŠŸèƒ½ (Added)

#### æšä¸¾åŠŸèƒ½
- âœ… **å­—ç¬¦ä¸²æšä¸¾**: `'active|inactive|pending'` ç®€å†™è¯­æ³•
- âœ… **å¸ƒå°”å€¼æšä¸¾**: `'true|false'` è‡ªåŠ¨è¯†åˆ«ä¸ºå¸ƒå°”å€¼
- âœ… **æ•°å­—æšä¸¾**: `'1|2|3'` è‡ªåŠ¨è¯†åˆ«ä¸ºæ•°å­—
- âœ… **æ•´æ•°æšä¸¾**: `'enum:integer:1|2|3'` æ˜¾å¼æŒ‡å®šæ•´æ•°ç±»å‹
- âœ… **å°æ•°æšä¸¾**: `'1.0|1.5|2.0'` æ”¯æŒå°æ•°å€¼
- âœ… **å¿…å¡«æšä¸¾**: `'active|inactive!'` æ”¯æŒå¿…å¡«æ ‡è®°
- âœ… **æ˜¾å¼ç±»å‹**: `'enum:type:values'` æ˜¾å¼æŒ‡å®šæšä¸¾ç±»å‹

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
const { dsl, validate } = require('schema-dsl');

const schema = dsl({
  // å­—ç¬¦ä¸²æšä¸¾ï¼ˆè‡ªåŠ¨è¯†åˆ«ï¼‰
  status: 'active|inactive|pending',
  
  // å¸ƒå°”å€¼æšä¸¾ï¼ˆè‡ªåŠ¨è¯†åˆ«ï¼‰
  isPublic: 'true|false',
  
  // æ•°å­—æšä¸¾ï¼ˆè‡ªåŠ¨è¯†åˆ«ï¼‰
  priority: '1|2|3',
  
  // æ•´æ•°æšä¸¾ï¼ˆæ˜¾å¼æŒ‡å®šï¼‰
  level: 'enum:integer:1|2|3',
  
  // å¿…å¡«æšä¸¾
  role: 'admin|user|guest!'
});

// éªŒè¯
const result = validate(schema, {
  status: 'active',
  isPublic: true,
  priority: 1,
  level: 2,
  role: 'admin'
});
```

#### ç»Ÿä¸€é”™è¯¯æ¶ˆæ¯
- âœ… **ç»Ÿä¸€ 'enum' é”®**: æ‰€æœ‰æšä¸¾ç±»å‹ç»Ÿä¸€ä½¿ç”¨ `'enum'` å®šä¹‰é”™è¯¯æ¶ˆæ¯
- âœ… **ç®€åŒ–é…ç½®**: ä¸éœ€è¦è®°å¿†ä¸åŒç±»å‹çš„é”™è¯¯æ¶ˆæ¯é”®å
- âœ… **é«˜çº§ç”¨æ³•**: æ”¯æŒ `'type.enum'` æ ¼å¼æŒ‰ç±»å‹å®šåˆ¶æ¶ˆæ¯ï¼ˆå¯é€‰ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
const schema = dsl({
  status: dsl('active|inactive').messages({
    'enum': 'çŠ¶æ€å¿…é¡»æ˜¯ active æˆ– inactive'  // ç»Ÿä¸€ä½¿ç”¨ enum
  })
});
```

### ğŸ“ æ–‡æ¡£ (Documentation)

- âœ… **æ–°å¢ docs/enum.md**: å®Œæ•´çš„æšä¸¾åŠŸèƒ½æ–‡æ¡£ï¼ˆ476è¡Œï¼‰
- âœ… **æ›´æ–° README.md**: æ·»åŠ æšä¸¾è¯­æ³•è¯´æ˜
- âœ… **æ–°å¢ç¤ºä¾‹**: examples/enum.examples.jsï¼ˆ325è¡Œï¼Œ10ä¸ªç¤ºä¾‹ï¼‰

### âœ… æµ‹è¯• (Tests)

- âœ… **æ–°å¢ test/unit/enum.test.js**: 30ä¸ªæšä¸¾æµ‹è¯•ç”¨ä¾‹
- âœ… **æµ‹è¯•è¦†ç›–**: å­—ç¬¦ä¸²/å¸ƒå°”å€¼/æ•°å­—/æ•´æ•°æšä¸¾å…¨è¦†ç›–
- âœ… **é”™è¯¯å¤„ç†æµ‹è¯•**: æ— æ•ˆæšä¸¾å€¼ã€ç±»å‹ä¸åŒ¹é…æµ‹è¯•

### ğŸ“Š å˜æ›´ç»Ÿè®¡

- **æ–°å¢ä»£ç **: ~500 è¡Œ
- **æ–°å¢æµ‹è¯•**: 30 ä¸ª
- **æ–°å¢æ–‡æ¡£**: 476 è¡Œ
- **æ–°å¢ç¤ºä¾‹**: 325 è¡Œ

---

## [v1.0.0] - 2025-12-29

### ğŸ‰ åˆå§‹å‘å¸ƒ

#### æ ¸å¿ƒåŠŸèƒ½
- âœ… **DSL è¯­æ³•**: ç®€æ´çš„å­—ç¬¦ä¸² DSL å®šä¹‰ Schema
  - `'string:3-32!'` - å­—ç¬¦ä¸²é•¿åº¦ 3-32ï¼Œå¿…å¡«
  - `'number:0-100'` - æ•°å­—èŒƒå›´ 0-100
  - `'email!'` - é‚®ç®±æ ¼å¼ï¼Œå¿…å¡«
  
- âœ… **åŸºç¡€ç±»å‹**: string, number, integer, boolean, object, array, null

- âœ… **æ ¼å¼ç±»å‹**: email, url, uuid, date, datetime, time, ipv4, ipv6, binary

- âœ… **æ¨¡å¼ç±»å‹**: 
  - objectId - MongoDB ObjectId
  - hexColor - åå…­è¿›åˆ¶é¢œè‰²
  - macAddress - MAC åœ°å€
  - cron - Cron è¡¨è¾¾å¼
  - phone - æ‰‹æœºå·ï¼ˆæ”¯æŒå¤šå›½ï¼‰
  - idCard - èº«ä»½è¯å·
  - creditCard - ä¿¡ç”¨å¡å·
  - licensePlate - è½¦ç‰Œå·
  - postalCode - é‚®æ”¿ç¼–ç 
  - passport - æŠ¤ç…§å·

- âœ… **éªŒè¯åŠŸèƒ½**: 
  - `validate(schema, data)` - åŒæ­¥éªŒè¯
  - `validateAsync(schema, data)` - å¼‚æ­¥éªŒè¯

- âœ… **é”™è¯¯æ ¼å¼åŒ–**: å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

- âœ… **å¤šè¯­è¨€æ”¯æŒ**: zh-CN, en-US

- âœ… **é“¾å¼ API**: String æ‰©å±•ï¼Œæ”¯æŒ `.label()`, `.messages()`, `.pattern()` ç­‰

- âœ… **SchemaUtils**: omit, pick, partial, extend å·¥å…·æ–¹æ³•

#### æ–‡æ¡£å’Œæµ‹è¯•
- âœ… **å®Œæ•´æ–‡æ¡£**: README, API æ–‡æ¡£, ç¤ºä¾‹ä»£ç 
- âœ… **æµ‹è¯•è¦†ç›–**: 447+ æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ç‡ >90%

---

**æ›´å¤šå†å²ç‰ˆæœ¬ä¿¡æ¯è¯·å‚è€ƒ Git æäº¤è®°å½•**
