# v1.1.3 å˜æ›´æ—¥å¿—

> **å‘å¸ƒæ—¥æœŸ**: 2026-01-09  
> **ç‰ˆæœ¬å·**: v1.1.3  
> **ç±»å‹**: ğŸ› Bugä¿®å¤

---

## ğŸ“‹ å˜æ›´æ¦‚è§ˆ

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| ğŸ› Bugä¿®å¤ | 1 | ç±»å‹é”™è¯¯æ¶ˆæ¯æ¨¡æ¿å˜é‡æœªæ›¿æ¢ |

---

## ğŸ› Bug ä¿®å¤

### ç±»å‹éªŒè¯é”™è¯¯æ¶ˆæ¯æ¨¡æ¿å˜é‡æœªæ›¿æ¢

**é—®é¢˜æè¿°**ï¼š
å½“ç±»å‹éªŒè¯å¤±è´¥æ—¶ï¼Œé”™è¯¯æ¶ˆæ¯ä¸­çš„ `{{#actual}}` æ¨¡æ¿å˜é‡æ²¡æœ‰è¢«æ›¿æ¢ï¼Œå¯¼è‡´é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºä¸å®Œæ•´ã€‚

**ä¿®å¤å‰**ï¼š
```javascript
const schema = dsl({ age: 'string!' });
const result = validate(schema, { age: 25 });
// âŒ é”™è¯¯æ¶ˆæ¯: "age should be string, got {{#actual}}"
```

**ä¿®å¤å**ï¼š
```javascript
const schema = dsl({ age: 'string!' });
const result = validate(schema, { age: 25 });
// âœ… é”™è¯¯æ¶ˆæ¯: "age should be string, got number"
```

**æŠ€æœ¯ç»†èŠ‚**ï¼š

ä¿®å¤æ–‡ä»¶ï¼š`lib/core/ErrorFormatter.js` ç¬¬ 280-284 è¡Œ

**ä¿®å¤å‰ä»£ç **ï¼š
```javascript
static formatDetailed(error, data, customMessages = {}, locale = 'en-US') {
  // ... existing code ...
  
  // âŒ ç¼ºå°‘ actual å‚æ•°
  const message = MessageTemplate.render(template, {
    value: data,
    min: error.params?.limit,
    max: error.params?.limit,
    // ç¼ºå°‘ actual å‚æ•°
  });
}
```

**ä¿®å¤åä»£ç **ï¼š
```javascript
static formatDetailed(error, data, customMessages = {}, locale = 'en-US') {
  // ... existing code ...
  
  // âœ… æ·»åŠ  actual å‚æ•°è®¡ç®—é€»è¾‘
  const actual = data === null ? 'null' 
    : data === undefined ? 'undefined'
    : Array.isArray(data) ? 'array'
    : typeof data;
  
  const message = MessageTemplate.render(template, {
    value: data,
    min: error.params?.limit,
    max: error.params?.limit,
    actual: actual  // âœ… æ·»åŠ  actual å‚æ•°
  });
}
```

**æ”¯æŒçš„æ•°æ®ç±»å‹**ï¼š
- âœ… `number` - æ•°å­—ç±»å‹
- âœ… `string` - å­—ç¬¦ä¸²ç±»å‹
- âœ… `boolean` - å¸ƒå°”ç±»å‹
- âœ… `object` - å¯¹è±¡ç±»å‹
- âœ… `array` - æ•°ç»„ç±»å‹
- âœ… `null` - ç©ºå€¼
- âœ… `undefined` - æœªå®šä¹‰

---

## ğŸ“Š å½±å“èŒƒå›´

### å½±å“çš„åŠŸèƒ½

- âœ… **ç±»å‹éªŒè¯é”™è¯¯æ¶ˆæ¯**: æ­£ç¡®æ˜¾ç¤ºå®é™…æ•°æ®ç±»å‹
- âœ… **å¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯**: `{{#actual}}` å˜é‡åœ¨æ‰€æœ‰è¯­è¨€ä¸­æ­£ç¡®æ›¿æ¢
- âœ… **å¼€å‘ä½“éªŒ**: é”™è¯¯æ¶ˆæ¯æ›´æ¸…æ™°ï¼Œä¾¿äºè°ƒè¯•

### ä¸å½±å“çš„åŠŸèƒ½

- âœ… **éªŒè¯é€»è¾‘**: éªŒè¯åŠŸèƒ½æœ¬èº«ä¸å—å½±å“
- âœ… **å…¶ä»–é”™è¯¯æ¶ˆæ¯**: éç±»å‹éªŒè¯çš„é”™è¯¯æ¶ˆæ¯ä¸å—å½±å“
- âœ… **APIæ¥å£**: æ‰€æœ‰APIä¿æŒä¸å˜

---

## âœ… å‘åå…¼å®¹æ€§

- âœ… **æ— ç ´åæ€§å˜æ›´**: å®Œå…¨å‘åå…¼å®¹
- âœ… **APIä¸å˜**: æ‰€æœ‰å…¬å¼€APIä¿æŒä¸å˜
- âœ… **é…ç½®ä¸å˜**: æ— éœ€ä¿®æ”¹é…ç½®

---

## ğŸ¯ å‡çº§æŒ‡å—

### ä» v1.1.2 å‡çº§åˆ° v1.1.3

**æ¨èæ“ä½œ**:
```bash
npm install schema-dsl@1.1.3
```

**æ— éœ€ä¿®æ”¹ä»£ç **: æœ¬æ¬¡æ›´æ–°ä»…ä¿®å¤é”™è¯¯æ¶ˆæ¯æ˜¾ç¤ºï¼Œä¸å½±å“éªŒè¯é€»è¾‘ã€‚

**éªŒè¯å‡çº§æˆåŠŸ**:
```javascript
const { dsl, validate } = require('schema-dsl');

// æµ‹è¯•ç±»å‹éªŒè¯é”™è¯¯æ¶ˆæ¯
const schema = dsl({ age: 'string!' });
const result = validate(schema, { age: 25 });

console.log(result.errors[0].message);
// åº”è¯¥è¾“å‡º: "age should be string, got number"
// è€Œä¸æ˜¯: "age should be string, got {{#actual}}"
```

---

## ğŸ“¦ ä¾èµ–å˜æ›´

**æ— ä¾èµ–å˜æ›´**

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [monSQLize](https://github.com/zy410419243/monSQLize) é¡¹ç›®å‘ç°å¹¶æŠ¥å‘Šæ­¤é—®é¢˜ã€‚

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub Repository](https://github.com/vextjs/schema-dsl)
- [npm Package](https://www.npmjs.com/package/schema-dsl)
- [Issue #XXX](https://github.com/vextjs/schema-dsl/issues/XXX) - ç›¸å…³Issue

---

**å‘å¸ƒè€…**: schema-dsl Team  
**å‘å¸ƒæ—¶é—´**: 2026-01-09  
**ä¸‹ä¸€ç‰ˆæœ¬**: v1.1.4

