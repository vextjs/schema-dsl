# å¤šè¯­è¨€é…ç½®æŒ‡å—

**ç‰ˆæœ¬**: v1.0.9  
**æœ€åæ›´æ–°**: 2026-01-04

---

## ğŸ“š å¤šè¯­è¨€æ–‡æ¡£å¯¼èˆª

æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–‡æ¡£ï¼š

- ğŸš€ **æ–°æ‰‹å¿«é€Ÿä¸Šæ‰‹**: [i18n.md](./i18n.md)ï¼ˆå½“å‰æ–‡æ¡£ï¼‰- 5åˆ†é’Ÿå­¦ä¼šåŸºç¡€ç”¨æ³•
- ğŸ“– **å®Œæ•´ä½¿ç”¨æŒ‡å—**: [i18n-user-guide.md](./i18n-user-guide.md) - è¯¦ç»†çš„ç”¨æˆ·æŒ‡å—å’Œæœ€ä½³å®è·µ
- ğŸ¯ **æ·»åŠ æ–°è¯­è¨€**: [add-custom-locale.md](./add-custom-locale.md) - æ·»åŠ è‡ªå®šä¹‰è¯­è¨€åŒ…æ•™ç¨‹
- ğŸ”„ **åŠ¨æ€åˆ‡æ¢è¯­è¨€**: [dynamic-locale.md](./dynamic-locale.md) - APIå¼€å‘ä¸­çš„åŠ¨æ€è¯­è¨€åˆ‡æ¢
- ğŸŒ **å‰ç«¯é›†æˆ**: [frontend-i18n-guide.md](./frontend-i18n-guide.md) - å‰åç«¯åˆ†ç¦»é¡¹ç›®é›†æˆæŒ‡å—

---

## ğŸ“– æ¦‚è¿°

schema-dsl æ”¯æŒå®Œæ•´çš„å¤šè¯­è¨€åŠŸèƒ½ï¼Œå…è®¸ä½ è‡ªå®šä¹‰å­—æ®µæ ‡ç­¾å’Œé”™è¯¯æ¶ˆæ¯çš„ç¿»è¯‘ã€‚

**v1.0.9 æ–°å¢**ï¼š
- âœ… æ”¯æŒå‚æ•°åŒ–è¯­è¨€åˆ‡æ¢ï¼ˆæ— éœ€ä¿®æ”¹å…¨å±€çŠ¶æ€ï¼‰
- âœ… æ”¯æŒè‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ï¼ˆä¸‰ç§æ ¼å¼ï¼‰
- âœ… TypeScript ç±»å‹å®šä¹‰å®Œæ•´

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šéªŒè¯æ—¶åŠ¨æ€æŒ‡å®šè¯­è¨€ï¼ˆæ¨èï¼‰â­

```javascript
const { dsl, validate } = require('schema-dsl');

const schema = dsl({ username: 'string:3-32!' });

// ä½¿ç”¨ä¸­æ–‡é”™è¯¯æ¶ˆæ¯
const result = validate(schema, { username: 'ab' }, { locale: 'zh-CN' });
// message: "usernameé•¿åº¦ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦"

// ä½¿ç”¨è‹±æ–‡é”™è¯¯æ¶ˆæ¯
const result2 = validate(schema, { username: 'ab' }, { locale: 'en-US' });
// message: "username length must be at least 3"
```

### æ–¹å¼2ï¼šä½¿ç”¨å…¨å±€é…ç½®ï¼ˆå‘åå…¼å®¹ï¼‰

```javascript
const { Locale } = require('schema-dsl');

// è®¾ç½®é»˜è®¤è¯­è¨€
Locale.setLocale('zh-CN');

// åç»­éªŒè¯ä¼šä½¿ç”¨ä¸­æ–‡é”™è¯¯æ¶ˆæ¯
const result = validate(schema, data);
```

---

## ğŸ“ å†…ç½®è¯­è¨€æ”¯æŒ

schema-dsl å†…ç½®äº†ä»¥ä¸‹è¯­è¨€åŒ…ï¼š

| è¯­è¨€ä»£ç  | è¯­è¨€åç§° | æ”¯æŒçŠ¶æ€ |
|---------|---------|---------|
| `zh-CN` | ç®€ä½“ä¸­æ–‡ | âœ… å®Œæ•´æ”¯æŒ |
| `en-US` | è‹±è¯­ï¼ˆç¾å›½ï¼‰| âœ… å®Œæ•´æ”¯æŒ |
| `ja-JP` | æ—¥è¯­ | âœ… å®Œæ•´æ”¯æŒ |
| `es-ES` | è¥¿ç­ç‰™è¯­ | âœ… å®Œæ•´æ”¯æŒ |
| `fr-FR` | æ³•è¯­ | âœ… å®Œæ•´æ”¯æŒ |

---

## ğŸ¯ é«˜çº§ç”¨æ³•

### åŸºç¡€é…ç½®

```javascript
const { dsl, validate } = require('schema-dsl');
const path = require('path');

// âœ… æ–¹å¼ 1: ä»ç›®å½•åŠ è½½ï¼ˆæ¨èï¼‰
dsl.config({
  i18n: path.join(__dirname, 'i18n/dsl')  // ç›´æ¥ä¼ å­—ç¬¦ä¸²è·¯å¾„
});

// âœ… æ–¹å¼ 2: ç›´æ¥ä¼ å…¥å¯¹è±¡
dsl.config({
  i18n: {
    'zh-CN': require('./i18n/dsl/zh-CN'),
    'en-US': require('./i18n/dsl/en-US')
  }
});
```

### ç›®å½•ç»“æ„

```
project/
â”œâ”€â”€ i18n/
â”‚   â””â”€â”€ dsl/              # schema-dsl è¯­è¨€åŒ…ç›®å½•
â”‚       â”œâ”€â”€ zh-CN.js      # ä¸­æ–‡è¯­è¨€åŒ…
â”‚       â”œâ”€â”€ en-US.js      # è‹±æ–‡è¯­è¨€åŒ…
â”‚       â””â”€â”€ ja-JP.js      # æ—¥è¯­è¯­è¨€åŒ…ï¼ˆå¯é€‰ï¼‰
```

---

## ğŸ“ è¯­è¨€åŒ…æ ¼å¼

### å®Œæ•´ç¤ºä¾‹ (`i18n/dsl/zh-CN.js`)

```javascript
module.exports = {
  // ========== å­—æ®µæ ‡ç­¾ ==========
  'field.username': 'ç”¨æˆ·å',
  'field.email': 'é‚®ç®±åœ°å€',
  'field.password': 'å¯†ç ',
  'field.age': 'å¹´é¾„',
  
  // ========== è¦†ç›–é»˜è®¤é”™è¯¯æ¶ˆæ¯ ==========
  'required': '{{#label}}æ˜¯å¿…å¡«é¡¹',
  'string.minLength': '{{#label}}é•¿åº¦ä¸èƒ½å°‘äº{{#limit}}ä¸ªå­—ç¬¦',
  'string.maxLength': '{{#label}}é•¿åº¦ä¸èƒ½è¶…è¿‡{{#limit}}ä¸ªå­—ç¬¦',
  'string.enum': '{{#label}}å¿…é¡»æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€: {{#valids}}',
  'number.base': '{{#label}}å¿…é¡»æ˜¯æ•°å­—ç±»å‹',
  'number.min': '{{#label}}ä¸èƒ½å°äº{{#limit}}',
  'number.max': '{{#label}}ä¸èƒ½å¤§äº{{#limit}}',
  'boolean.base': '{{#label}}å¿…é¡»æ˜¯å¸ƒå°”ç±»å‹',
  'enum': '{{#label}}å¿…é¡»æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€: {{#allowed}}',
  
  // ========== è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ ==========
  'custom.invalidEmail': 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥',
  'custom.emailTaken': 'è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ',
  'custom.passwordWeak': 'å¯†ç å¼ºåº¦ä¸å¤Ÿ'
};
```

---

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### 1. å­—æ®µæ ‡ç­¾ç¿»è¯‘

```javascript
const schema = dsl({
  username: dsl('string:3-32!').label('field.username'),
  email: dsl('email!').label('field.email')
});

const result = validate(schema, { username: 'ab' });
// é”™è¯¯æ¶ˆæ¯: "ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦"
```

### 2. è¦†ç›–é»˜è®¤é”™è¯¯æ¶ˆæ¯

```javascript
// è¯­è¨€åŒ…
module.exports = {
  'required': '{{#label}}å¿…é¡»å¡«å†™'
};

// Schema
const schema = dsl({ username: 'string!' });

validate(schema, {});
// é”™è¯¯æ¶ˆæ¯: "usernameå¿…é¡»å¡«å†™"
```

### 3. è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯

```javascript
const schema = dsl({
  status: dsl('active|inactive').messages({
    'enum': 'çŠ¶æ€å¿…é¡»æ˜¯ active æˆ– inactive'
  })
});
```

### 4. åŠ¨æ€è¯­è¨€åˆ‡æ¢

```javascript
dsl.config({
  i18n: {
    'zh-CN': { 'required': '{{#label}}æ˜¯å¿…å¡«é¡¹' },
    'en-US': { 'required': '{{#label}} is required' }
  }
});

// é»˜è®¤è¯­è¨€ï¼ˆzh-CNï¼‰
validate(schema, data);

// åˆ‡æ¢åˆ°è‹±æ–‡
validate(schema, data, { locale: 'en-US' });
```

---

## ğŸ“‹ å†…ç½®é”™è¯¯æ¶ˆæ¯é”®

### é€šç”¨é”™è¯¯

| é”™è¯¯é”® | è¯´æ˜ | é»˜è®¤æ¶ˆæ¯ï¼ˆzh-CNï¼‰ |
|--------|------|-------------------|
| `required` | å¿…å¡«å­—æ®µç¼ºå¤± | {{#label}}æ˜¯å¿…å¡«é¡¹ |
| `enum` | æšä¸¾å€¼ä¸åœ¨èŒƒå›´ | {{#label}}å¿…é¡»æ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€: {{#allowed}} |
| `pattern` | æ ¼å¼ä¸æ­£ç¡® | {{#label}}æ ¼å¼ä¸æ­£ç¡® |

### String é”™è¯¯

| é”™è¯¯é”® | è¯´æ˜ |
|--------|------|
| `string.minLength` | æœ€å°é•¿åº¦ |
| `string.maxLength` | æœ€å¤§é•¿åº¦ |
| `string.pattern` | æ­£åˆ™ä¸åŒ¹é… |
| `string.enum` | å­—ç¬¦ä¸²æšä¸¾ |

### Number é”™è¯¯

| é”™è¯¯é”® | è¯´æ˜ |
|--------|------|
| `number.base` | ç±»å‹ä¸æ˜¯æ•°å­— |
| `number.min` | å°äºæœ€å°å€¼ |
| `number.max` | å¤§äºæœ€å¤§å€¼ |
| `number.integer` | ä¸æ˜¯æ•´æ•° |

### Boolean é”™è¯¯

| é”™è¯¯é”® | è¯´æ˜ |
|--------|------|
| `boolean.base` | ç±»å‹ä¸æ˜¯å¸ƒå°”å€¼ |

### Array é”™è¯¯

| é”™è¯¯é”® | è¯´æ˜ |
|--------|------|
| `array.base` | ç±»å‹ä¸æ˜¯æ•°ç»„ |
| `array.min` | å…ƒç´ æ•°é‡ä¸è¶³ |
| `array.max` | å…ƒç´ æ•°é‡è¿‡å¤š |
| `array.unique` | åŒ…å«é‡å¤å…ƒç´  |

### Format é”™è¯¯

| é”™è¯¯é”® | è¯´æ˜ |
|--------|------|
| `format.email` | é‚®ç®±æ ¼å¼é”™è¯¯ |
| `format.url` | URLæ ¼å¼é”™è¯¯ |
| `format.uuid` | UUIDæ ¼å¼é”™è¯¯ |
| `format.date` | æ—¥æœŸæ ¼å¼é”™è¯¯ |
| `format.binary` | Base64ç¼–ç é”™è¯¯ |

### Pattern é”™è¯¯

| é”™è¯¯é”® | è¯´æ˜ |
|--------|------|
| `pattern.phone` | æ‰‹æœºå·æ ¼å¼é”™è¯¯ |
| `pattern.idCard` | èº«ä»½è¯æ ¼å¼é”™è¯¯ |
| `pattern.objectId` | ObjectIdæ ¼å¼é”™è¯¯ |

å®Œæ•´åˆ—è¡¨è¯·å‚è€ƒ: `lib/locales/zh-CN.js`

---

## ğŸ”§ é«˜çº§ç”¨æ³•

### åµŒå¥—å­—æ®µæ ‡ç­¾

```javascript
// è¯­è¨€åŒ…
module.exports = {
  'field.address.city': 'åŸå¸‚',
  'field.address.street': 'è¡—é“'
};

// Schema
const schema = dsl({
  address: {
    city: dsl('string!').label('field.address.city'),
    street: dsl('string!').label('field.address.street')
  }
});
```

### é”™è¯¯æ¶ˆæ¯ä¼˜å…ˆçº§

1. **å­—æ®µçº§è‡ªå®šä¹‰æ¶ˆæ¯** - `.messages()` æ–¹æ³•
2. **Schemaçº§æ ‡ç­¾** - `.label()` æ–¹æ³•
3. **è¯­è¨€åŒ…è‡ªå®šä¹‰æ¶ˆæ¯** - `i18n` é…ç½®
4. **é»˜è®¤é”™è¯¯æ¶ˆæ¯** - å†…ç½®è¯­è¨€åŒ…

```javascript
// ä¼˜å…ˆçº§ç¤ºä¾‹
dsl.config({
  i18n: {
    'zh-CN': {
      'required': 'å…¨å±€å¿…å¡«æ¶ˆæ¯'  // ä¼˜å…ˆçº§ 3
    }
  }
});

const schema = dsl({
  username: dsl('string!')
    .label('ç”¨æˆ·å')                    // ä¼˜å…ˆçº§ 2
    .messages({ 'required': 'å¿…é¡»å¡«' }) // ä¼˜å…ˆçº§ 1ï¼ˆæœ€é«˜ï¼‰
});
```

### å¤šè¯­è¨€æœ€ä½³å®è·µ

#### 1. ç›®å½•ç»“æ„

```
project/
â”œâ”€â”€ i18n/
â”‚   â””â”€â”€ dsl/
â”‚       â”œâ”€â”€ zh-CN.js      # ä¸­æ–‡
â”‚       â”œâ”€â”€ en-US.js      # è‹±æ–‡
â”‚       â”œâ”€â”€ ja-JP.js      # æ—¥è¯­
â”‚       â””â”€â”€ index.js      # å¯¼å‡ºå·¥å…·
```

#### 2. å¯¼å‡ºå·¥å…· (`i18n/dsl/index.js`)

```javascript
const path = require('path');

module.exports = {
  'zh-CN': require('./zh-CN'),
  'en-US': require('./en-US'),
  'ja-JP': require('./ja-JP')
};

// ä½¿ç”¨
dsl.config({
  i18n: require('./i18n/dsl')
});
```

#### 3. æ¶ˆæ¯å¤ç”¨

```javascript
// i18n/dsl/common.js
module.exports = {
  required: '{{#label}}æ˜¯å¿…å¡«é¡¹',
  minLength: '{{#label}}é•¿åº¦ä¸èƒ½å°‘äº{{#limit}}ä¸ªå­—ç¬¦'
};

// i18n/dsl/zh-CN.js
const common = require('./common');

module.exports = {
  ...common,
  'field.username': 'ç”¨æˆ·å',
  'field.email': 'é‚®ç®±'
};
```

---

## ğŸ“Š å®Œæ•´ç¤ºä¾‹

### ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ

```javascript
const { dsl, validate } = require('schema-dsl');
const path = require('path');

// é…ç½®å¤šè¯­è¨€
dsl.config({
  i18n: path.join(__dirname, 'i18n/dsl')
});

// å®šä¹‰ Schema
const userSchema = dsl({
  username: dsl('string:3-32!').label('field.username'),
  email: dsl('email!').label('field.email'),
  password: dsl('string:8-32!').label('field.password'),
  age: dsl('number:18-120').label('field.age'),
  role: dsl('admin|user|guest!').label('field.role')
});

// éªŒè¯ï¼ˆä¸­æ–‡ï¼‰
let result = validate(userSchema, {
  username: 'ab',
  email: 'invalid',
  role: 'admin'
});

console.log(result.errors);
// [
//   { path: 'username', message: 'ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦' },
//   { path: 'email', message: 'é‚®ç®±åœ°å€å¿…é¡»æ˜¯æœ‰æ•ˆçš„é‚®ç®±åœ°å€' },
//   { path: 'password', message: 'å¯†ç æ˜¯å¿…å¡«é¡¹' }
// ]

// éªŒè¯ï¼ˆè‹±æ–‡ï¼‰
result = validate(userSchema, {
  username: 'ab'
}, { locale: 'en-US' });

console.log(result.errors[0].message);
// "username must be at least 3 characters"
```

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. è¯­è¨€åŒ…ä¸ç”Ÿæ•ˆï¼Ÿ

**æ£€æŸ¥æ¸…å•**:
- âœ… é…ç½®é”®æ˜¯å¦æ­£ç¡®ï¼ˆ`i18n` è€Œé `locales`ï¼‰
- âœ… ç›®å½•è·¯å¾„æ˜¯å¦æ­£ç¡®
- âœ… æ–‡ä»¶åæ˜¯å¦ä¸ºè¯­è¨€ä»£ç ï¼ˆå¦‚ `zh-CN.js`ï¼‰
- âœ… æ˜¯å¦ä½¿ç”¨äº† `module.exports`

### 2. é”™è¯¯æ¶ˆæ¯ä»ç„¶æ˜¯è‹±æ–‡ï¼Ÿ

**åŸå› **: é»˜è®¤è¯­è¨€æ˜¯è‹±æ–‡ï¼Œéœ€è¦è®¾ç½®è¯­è¨€

```javascript
// æ–¹æ³• 1: å…¨å±€è®¾ç½®
const Locale = require('schema-dsl/lib/core/Locale');
Locale.setLocale('zh-CN');

// æ–¹æ³• 2: éªŒè¯æ—¶æŒ‡å®š
validate(schema, data, { locale: 'zh-CN' });
```

### 3. è‡ªå®šä¹‰æ¶ˆæ¯ä¸æ˜¾ç¤ºï¼Ÿ

**æ£€æŸ¥ä¼˜å…ˆçº§**: 
- `.messages()` > `.label()` > è¯­è¨€åŒ… > é»˜è®¤

```javascript
// é”™è¯¯ï¼šlabel ä¼šè¢« messages è¦†ç›–
dsl('string!')
  .label('ç”¨æˆ·å')
  .messages({ 'required': 'å¿…å¡«' })  // è¿™ä¸ªç”Ÿæ•ˆ
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](../README.md)
- [API å‚è€ƒ](./api.md)
- [å®Œæ•´ç¤ºä¾‹](../examples/i18n-full-demo.js)

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2025-12-31  
**ç‰ˆæœ¬**: v1.0.1

